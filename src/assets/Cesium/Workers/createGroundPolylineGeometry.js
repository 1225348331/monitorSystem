define(["./Transforms-d150322f","./Matrix2-fa56e6dd","./Check-ba987d16","./when-4bbc8319","./ComponentDatatype-bfa70d4a","./ArcType-98ec98bf","./arrayRemoveDuplicates-48046ac4","./EllipsoidGeodesic-89883ae6","./EllipsoidRhumbLine-7ae2cb99","./EncodedCartesian3-77992927","./GeometryAttribute-e8a7fd74","./IntersectionTests-d4f2fcd6","./Plane-034a4517","./WebMercatorProjection-f1297672","./combine-83860057","./RuntimeError-55ee6bc3","./WebGLConstants-1c8239cc"],function(Ie,Oe,e,B,be,G,j,_,V,Pe,ke,Y,r,a,t,i,n){"use strict";function s(e){e=B.defaultValue(e,B.defaultValue.EMPTY_OBJECT);var a=Oe.Ellipsoid.WGS84;B.defined(e.tileInfo)&&B.defined(e.tileInfo.lods)&&(this._tileInfo=e.tileInfo,4490!=e.tileInfo.spatialReference.wkid&&4490!=e.tileInfo.spatialReference.epsg||(a=Oe.Ellipsoid.CGCS2000)),this._ellipsoid=B.defaultValue(e.ellipsoid,a),this._rectangle=B.defaultValue(e.rectangle,Oe.Rectangle.MAX_VALUE),this._numberOfLevelZeroTilesX=B.defaultValue(e.numberOfLevelZeroTilesX,2),this._numberOfLevelZeroTilesY=B.defaultValue(e.numberOfLevelZeroTilesY,1),this._projection=new Ie.GeographicProjection(this._ellipsoid)}Object.defineProperties(s.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},rectangle:{get:function(){return this._rectangle}},projection:{get:function(){return this._projection}}}),s.prototype.getNumberOfXTilesAtLevel=function(a){if(!B.defined(this._tileInfo))return this._numberOfLevelZeroTilesX<<a;var e=this._tileInfo.lods.filter(function(e){return e.level===a});if(!B.defined(e))return this._numberOfLevelZeroTilesX<<a;e=e[0].resolution;return Math.round(360/(this._tileInfo.rows*e))},s.prototype.getNumberOfYTilesAtLevel=function(a){if(!B.defined(this._tileInfo))return this._numberOfLevelZeroTilesY<<a;var e=this._tileInfo.lods.filter(function(e){return e.level===a});if(!B.defined(e))return this._numberOfLevelZeroTilesY<<a;e=e[0].resolution;return Math.round(180/(this._tileInfo.cols*e))},s.prototype.rectangleToNativeRectangle=function(e,a){var t=be.CesiumMath.toDegrees(e.west),i=be.CesiumMath.toDegrees(e.south),n=be.CesiumMath.toDegrees(e.east),e=be.CesiumMath.toDegrees(e.north);return B.defined(a)?(a.west=t,a.south=i,a.east=n,a.north=e,a):new Oe.Rectangle(t,i,n,e)},s.prototype.tileXYToNativeRectangle=function(e,a,t,i){i=this.tileXYToRectangle(e,a,t,i);return i.west=be.CesiumMath.toDegrees(i.west),i.south=be.CesiumMath.toDegrees(i.south),i.east=be.CesiumMath.toDegrees(i.east),i.north=be.CesiumMath.toDegrees(i.north),i},s.prototype.tileXYToRectangle=function(e,a,t,i){var n=this._rectangle,r=0,s=0,o=0,l=0;if(B.defined(this._tileInfo)){var u=this._tileInfo.lods.filter(function(e){return e.level===t});if(B.defined(u)){var c=u[0].resolution;return o=this._tileInfo.origin.y-a*(this._tileInfo.cols*c),r=this._tileInfo.origin.x+e*(this._tileInfo.rows*c),l=this._tileInfo.origin.y-(a+1)*(this._tileInfo.cols*c),s=this._tileInfo.origin.x+(e+1)*(this._tileInfo.rows*c),r=be.CesiumMath.toRadians(r),o=be.CesiumMath.toRadians(o),s=be.CesiumMath.toRadians(s),l=be.CesiumMath.toRadians(l),(i=!B.defined(i)?new Oe.Rectangle(r,l,s,o):i).west=r,i.south=l,i.east=s,i.north=o,i}}u=this.getNumberOfXTilesAtLevel(t),c=this.getNumberOfYTilesAtLevel(t),u=n.width/u,r=e*u+n.west,s=(e+1)*u+n.west,c=n.height/c,o=n.north-a*c,l=n.north-(a+1)*c;return(i=!B.defined(i)?new Oe.Rectangle(r,l,s,o):i).west=r,i.south=l,i.east=s,i.north=o,i},s.prototype.positionToTileXY=function(e,a,t){var i=this._rectangle;if(Oe.Rectangle.contains(i,e)){if(B.defined(this._tileInfo)){var n=this._tileInfo.lods.filter(function(e){return e.level===a});if(B.defined(n)){var r=n[0].resolution,s=be.CesiumMath.toDegrees(e.longitude),o=be.CesiumMath.toDegrees(e.latitude),l=Math.floor((s-this._tileInfo.origin.x)/(this._tileInfo.rows*r)),u=Math.floor((this._tileInfo.origin.y-o)/(this._tileInfo.cols*r));return new Oe.Cartesian2(l,u)}}s=a,o=this.getNumberOfXTilesAtLevel(s),r=this.getNumberOfYTilesAtLevel(s),l=i.width/o,u=i.height/r,s=e.longitude;i.east<i.west&&(s+=be.CesiumMath.TWO_PI);l=(s-i.west)/l|0;o<=l&&(l=o-1);u=(i.north-e.latitude)/u|0;return(r<=u&&(u=r-1),B.defined(t))?(t.x=l,t.y=u,t):new Oe.Cartesian2(l,u)}};var o=new Oe.Cartesian3,l=new Oe.Cartesian3,u=new Oe.Cartographic,c=new Oe.Cartesian3,C=new Oe.Cartesian3,d=new Ie.BoundingSphere,h=new s,p=[new Oe.Cartographic,new Oe.Cartographic,new Oe.Cartographic,new Oe.Cartographic],f=new Oe.Cartesian2,Le={};function g(e){Oe.Cartographic.fromRadians(e.east,e.north,0,p[0]),Oe.Cartographic.fromRadians(e.west,e.north,0,p[1]),Oe.Cartographic.fromRadians(e.east,e.south,0,p[2]),Oe.Cartographic.fromRadians(e.west,e.south,0,p[3]);for(var a=0,t=0,i=0,n=0,r=Le._terrainHeightsMaxLevel,s=0;s<=r;++s){for(var o=!1,l=0;l<4;++l)if(h.positionToTileXY(p[l],s,f),0===l)i=f.x,n=f.y;else if(i!==f.x||n!==f.y){o=!0;break}if(o)break;a=i,t=n}if(0!==s)return{x:a,y:t,level:r<s?r:s-1}}Le.initialize=function(){var e=Le._initPromise;return B.defined(e)?e:(e=Ie.Resource.fetchJson(Ie.buildModuleUrl("Assets/approximateTerrainHeights.json")).then(function(e){Le._terrainHeights=e}),Le._initPromise=e)},Le.getMinimumMaximumHeights=function(e,a){a=B.defaultValue(a,Oe.Ellipsoid.WGS84);var t=g(e),i=Le._defaultMinTerrainHeight,n=Le._defaultMaxTerrainHeight;return B.defined(t)&&(t=t.level+"-"+t.x+"-"+t.y,t=Le._terrainHeights[t],B.defined(t)&&(i=t[0],n=t[1]),a.cartographicToCartesian(Oe.Rectangle.northeast(e,u),o),a.cartographicToCartesian(Oe.Rectangle.southwest(e,u),l),Oe.Cartesian3.midpoint(l,o,c),a=a.scaleToGeodeticSurface(c,C),i=B.defined(a)?(a=Oe.Cartesian3.distance(c,a),Math.min(i,-a)):Le._defaultMinTerrainHeight),{minimumTerrainHeight:i=Math.max(Le._defaultMinTerrainHeight,i),maximumTerrainHeight:n}},Le.getBoundingSphere=function(e,a){a=B.defaultValue(a,Oe.Ellipsoid.WGS84);var t=g(e),i=Le._defaultMaxTerrainHeight;B.defined(t)&&(n=t.level+"-"+t.x+"-"+t.y,n=Le._terrainHeights[n],B.defined(n)&&(i=n[1]));var n=Ie.BoundingSphere.fromRectangle3D(e,a,0);return Ie.BoundingSphere.fromRectangle3D(e,a,i,d),Ie.BoundingSphere.union(n,d,n)},Le._terrainHeightsMaxLevel=6,Le._defaultMaxTerrainHeight=9e3,Le._defaultMinTerrainHeight=-1e5,Le._terrainHeights=void 0,Le._initPromise=void 0,Object.defineProperties(Le,{initialized:{get:function(){return B.defined(Le._terrainHeights)}}});var F=[Ie.GeographicProjection,a.WebMercatorProjection],m=F.length,Ae=Math.cos(be.CesiumMath.toRadians(30)),w=Math.cos(be.CesiumMath.toRadians(150)),X=0,q=1e3;function v(e){var a=(e=B.defaultValue(e,B.defaultValue.EMPTY_OBJECT)).positions;this.width=B.defaultValue(e.width,1),this._positions=a,this.granularity=B.defaultValue(e.granularity,9999),this.loop=B.defaultValue(e.loop,!1),this.arcType=B.defaultValue(e.arcType,G.ArcType.GEODESIC),this._ellipsoid=Oe.Ellipsoid.WGS84,this._projectionIndex=0,this._workerName="createGroundPolylineGeometry",this._scene3DOnly=!1}Object.defineProperties(v.prototype,{packedLength:{get:function(){return 1+3*this._positions.length+1+1+1+Oe.Ellipsoid.packedLength+1+1}}}),v.setProjectionAndEllipsoid=function(e,a){for(var t=0,i=0;i<m;i++)if(a instanceof F[i]){t=i;break}e._projectionIndex=t,e._ellipsoid=a.ellipsoid};var y=new Oe.Cartesian3,M=new Oe.Cartesian3,T=new Oe.Cartesian3;function W(e,a,t,i,n){var r=U(i,e,0,y),t=U(i,e,t,M),a=U(i,a,0,T),t=Se(t,r,M),r=Se(a,r,T);return Oe.Cartesian3.cross(r,t,n),Oe.Cartesian3.normalize(n,n)}var E=new Oe.Cartographic,I=new Oe.Cartesian3,O=new Oe.Cartesian3,b=new Oe.Cartesian3;function Z(e,a,t,i,n,r,s,o,l,u,c){if(0!==n){var C;r===G.ArcType.GEODESIC?C=new _.EllipsoidGeodesic(e,a,s):r===G.ArcType.RHUMB&&(C=new V.EllipsoidRhumbLine(e,a,s));r=C.surfaceDistance;if(!(r<n))for(var d=W(e,a,i,s,b),n=Math.ceil(r/n),h=r/n,p=h,f=n-1,g=o.length,m=0;m<f;m++){var w=C.interpolateUsingSurfaceDistance(p,E),v=U(s,w,t,I),y=U(s,w,i,O);Oe.Cartesian3.pack(d,o,g),Oe.Cartesian3.pack(v,l,g),Oe.Cartesian3.pack(y,u,g),c.push(w.latitude),c.push(w.longitude),g+=3,p+=h}}}var P=new Oe.Cartographic;function U(e,a,t,i){return Oe.Cartographic.clone(a,P),P.height=t,Oe.Cartographic.toCartesian(P,e,i)}function Se(e,a,t){return Oe.Cartesian3.subtract(e,a,t),Oe.Cartesian3.normalize(t,t),t}function k(e,a,t,i){return i=Se(e,a,i),i=Oe.Cartesian3.cross(i,t,i),i=Oe.Cartesian3.normalize(i,i),i=Oe.Cartesian3.cross(t,i,i)}v.pack=function(e,a,t){var i=B.defaultValue(t,0),n=e._positions,r=n.length;a[i++]=r;for(var s=0;s<r;++s){var o=n[s];Oe.Cartesian3.pack(o,a,i),i+=3}return a[i++]=e.granularity,a[i++]=e.loop?1:0,a[i++]=e.arcType,Oe.Ellipsoid.pack(e._ellipsoid,a,i),i+=Oe.Ellipsoid.packedLength,a[i++]=e._projectionIndex,a[i++]=e._scene3DOnly?1:0,a},v.unpack=function(e,a,t){for(var i=B.defaultValue(a,0),n=e[i++],r=new Array(n),s=0;s<n;s++)r[s]=Oe.Cartesian3.unpack(e,i),i+=3;var o=e[i++],l=1===e[i++],u=e[i++],c=Oe.Ellipsoid.unpack(e,i);i+=Oe.Ellipsoid.packedLength;var C=e[i++],a=1===e[i++];return(t=!B.defined(t)?new v({positions:r}):t)._positions=r,t.granularity=o,t.loop=l,t.arcType=u,t._ellipsoid=c,t._projectionIndex=C,t._scene3DOnly=a,t};var L=new Oe.Cartesian3,A=new Oe.Cartesian3,S=new Oe.Cartesian3,x=new Oe.Cartesian3;function J(e,a,t,i,n){t=Se(t,a,x),e=k(e,a,t,L),a=k(i,a,t,A);if(be.CesiumMath.equalsEpsilon(Oe.Cartesian3.dot(e,a),-1,be.CesiumMath.EPSILON5))return n=Oe.Cartesian3.cross(t,e,n),n=Oe.Cartesian3.normalize(n,n);n=Oe.Cartesian3.add(a,e,n),n=Oe.Cartesian3.normalize(n,n);t=Oe.Cartesian3.cross(t,n,S);return n=Oe.Cartesian3.dot(a,t)<0?Oe.Cartesian3.negate(n,n):n}var Q=r.Plane.fromPointNormal(Oe.Cartesian3.ZERO,Oe.Cartesian3.UNIT_Y),K=new Oe.Cartesian3,$=new Oe.Cartesian3,ee=new Oe.Cartesian3,ae=new Oe.Cartesian3,te=new Oe.Cartesian3,ie=new Oe.Cartesian3,ne=new Oe.Cartographic,re=new Oe.Cartographic,se=new Oe.Cartographic;v.createGeometry=function(e){var a,t,i,n,r,s=!e._scene3DOnly,o=e.loop,l=e._ellipsoid,u=e.granularity,c=e.arcType,C=new F[e._projectionIndex](l),d=X,h=q,p=e._positions,f=p.length;2===f&&(o=!1);for(var g,m,w,v=new V.EllipsoidRhumbLine(void 0,void 0,l),y=[p[0]],_=0;_<f-1;_++)t=p[_],i=p[_+1],g=Y.IntersectionTests.lineSegmentPlane(t,i,Q,ie),!B.defined(g)||Oe.Cartesian3.equalsEpsilon(g,t,be.CesiumMath.EPSILON7)||Oe.Cartesian3.equalsEpsilon(g,i,be.CesiumMath.EPSILON7)||(e.arcType===G.ArcType.GEODESIC?y.push(Oe.Cartesian3.clone(g)):e.arcType===G.ArcType.RHUMB&&(w=l.cartesianToCartographic(g,ne).longitude,n=l.cartesianToCartographic(t,ne),r=l.cartesianToCartographic(i,re),v.setEndPoints(n,r),m=v.findIntersectionWithLongitude(w,se),g=l.cartographicToCartesian(m,ie),!B.defined(g)||Oe.Cartesian3.equalsEpsilon(g,t,be.CesiumMath.EPSILON7)||Oe.Cartesian3.equalsEpsilon(g,i,be.CesiumMath.EPSILON7)||y.push(Oe.Cartesian3.clone(g)))),y.push(i);o&&(t=p[f-1],i=p[0],g=Y.IntersectionTests.lineSegmentPlane(t,i,Q,ie),!B.defined(g)||Oe.Cartesian3.equalsEpsilon(g,t,be.CesiumMath.EPSILON7)||Oe.Cartesian3.equalsEpsilon(g,i,be.CesiumMath.EPSILON7)||(e.arcType===G.ArcType.GEODESIC?y.push(Oe.Cartesian3.clone(g)):e.arcType===G.ArcType.RHUMB&&(w=l.cartesianToCartographic(g,ne).longitude,n=l.cartesianToCartographic(t,ne),r=l.cartesianToCartographic(i,re),v.setEndPoints(n,r),m=v.findIntersectionWithLongitude(w,se),g=l.cartographicToCartesian(m,ie),!B.defined(g)||Oe.Cartesian3.equalsEpsilon(g,t,be.CesiumMath.EPSILON7)||Oe.Cartesian3.equalsEpsilon(g,i,be.CesiumMath.EPSILON7)||y.push(Oe.Cartesian3.clone(g)))));var M=y.length,T=new Array(M);for(_=0;_<M;_++){var E=Oe.Cartographic.fromCartesian(y[_],l);E.height=0,T[_]=E}if(!((M=(T=j.arrayRemoveDuplicates(T,Oe.Cartographic.equalsEpsilon)).length)<2)){var I=[],O=[],b=[],P=[],k=K,L=$,A=ee,S=ae,x=te,R=T[0],N=T[1];for(k=U(l,T[M-1],d,k),S=U(l,N,d,S),L=U(l,R,d,L),A=U(l,R,h,A),x=o?J(k,L,A,S,x):W(R,N,h,l,x),Oe.Cartesian3.pack(x,O,0),Oe.Cartesian3.pack(L,b,0),Oe.Cartesian3.pack(A,P,0),I.push(R.latitude),I.push(R.longitude),Z(R,N,d,h,u,c,l,O,b,P,I),_=1;_<M-1;++_){var k=Oe.Cartesian3.clone(L,k),L=Oe.Cartesian3.clone(S,L),D=T[_];U(l,D,h,A),U(l,T[_+1],d,S),J(k,L,A,S,x),a=O.length,Oe.Cartesian3.pack(x,O,a),Oe.Cartesian3.pack(L,b,a),Oe.Cartesian3.pack(A,P,a),I.push(D.latitude),I.push(D.longitude),Z(T[_],T[_+1],d,h,u,c,l,O,b,P,I)}var z=T[M-1],H=T[M-2];if(L=U(l,z,d,L),A=U(l,z,h,A),x=o?(N=T[0],J(k=U(l,H,d,k),L,A,S=U(l,N,d,S),x)):W(H,z,h,l,x),a=O.length,Oe.Cartesian3.pack(x,O,a),Oe.Cartesian3.pack(L,b,a),Oe.Cartesian3.pack(A,P,a),I.push(z.latitude),I.push(z.longitude),o){for(Z(z,R,d,h,u,c,l,O,b,P,I),a=O.length,_=0;_<3;++_)O[a+_]=O[_],b[a+_]=b[_],P[a+_]=P[_];I.push(R.latitude),I.push(R.longitude)}return function(e,a,t,i,n,r,s){var o,l,u,c,C,d,h=a._ellipsoid,p=t.length/3-1,f=8*p,g=4*f,m=36*p,w=new(65535<f?Uint32Array:Uint16Array)(m),v=new Float64Array(3*f),y=new Float32Array(g),_=new Float32Array(g),M=new Float32Array(g),T=new Float32Array(g),E=new Float32Array(g);s&&(u=new Float32Array(g),c=new Float32Array(g),C=new Float32Array(g),d=new Float32Array(2*f));var I=r.length/2,O=0,b=ze;b.height=0;var P=He;P.height=0;var k=Be,L=Ge;if(s)for(l=0,o=1;o<I;o++)b.latitude=r[l],b.longitude=r[l+1],P.latitude=r[l+2],P.longitude=r[l+3],k=a.project(b,k),L=a.project(P,L),O+=Oe.Cartesian3.distance(k,L),l+=2;var A=i.length/3;L=Oe.Cartesian3.unpack(i,0,L);var S,x=0;for(l=3,o=1;o<A;o++)k=Oe.Cartesian3.clone(L,k),L=Oe.Cartesian3.unpack(i,l,L),x+=Oe.Cartesian3.distance(k,L),l+=3;l=3;var R=0,N=0,D=0,z=0,H=!1,B=Oe.Cartesian3.unpack(t,0,Ve),G=Oe.Cartesian3.unpack(i,0,Ge),j=Oe.Cartesian3.unpack(n,0,Fe);e&&(Ee=Oe.Cartesian3.unpack(t,t.length-6,je),xe(j,Ee,B,G)&&(j=Oe.Cartesian3.negate(j,j)));var V,Y,F,X,q,W,Z,U=0,J=0,Q=0;for(o=0;o<p;o++){var K=Oe.Cartesian3.clone(B,je),$=Oe.Cartesian3.clone(G,Be),ee=Oe.Cartesian3.clone(j,Ye);H&&(ee=Oe.Cartesian3.negate(ee,ee)),B=Oe.Cartesian3.unpack(t,l,Ve),G=Oe.Cartesian3.unpack(i,l,Ge),j=Oe.Cartesian3.unpack(n,l,Fe),H=xe(j,K,B,G),b.latitude=r[R],b.longitude=r[R+1],P.latitude=r[R+2],P.longitude=r[R+3],s&&(_e=function(e,a){var t=Math.abs(e.longitude),i=Math.abs(a.longitude);{if(be.CesiumMath.equalsEpsilon(t,be.CesiumMath.PI,be.CesiumMath.EPSILON11)){var n=be.CesiumMath.sign(a.longitude);return e.longitude=n*(t-be.CesiumMath.EPSILON11),1}if(be.CesiumMath.equalsEpsilon(i,be.CesiumMath.PI,be.CesiumMath.EPSILON11)){e=be.CesiumMath.sign(e.longitude);return a.longitude=e*(i-be.CesiumMath.EPSILON11),2}}return 0}(b,P),V=a.project(b,Qe),(de=Se(Y=a.project(P,Ke),V,ua)).y=Math.abs(de.y),F=$e,X=ea,0===_e||Oe.Cartesian3.dot(de,Oe.Cartesian3.UNIT_Y)>Ae?(F=Re(a,b,ee,V,$e),X=Re(a,P,j,Y,ea)):1===_e?(X=Re(a,P,j,Y,ea),F.x=0,F.y=be.CesiumMath.sign(b.longitude-Math.abs(P.longitude)),F.z=0):(F=Re(a,b,ee,V,$e),X.x=0,X.y=be.CesiumMath.sign(b.longitude-P.longitude),X.z=0));var ae=Oe.Cartesian3.distance($,G),te=Pe.EncodedCartesian3.fromCartesian(K,oa),ie=Oe.Cartesian3.subtract(B,K,aa),ne=Oe.Cartesian3.normalize(ie,na),re=Oe.Cartesian3.subtract($,K,ta);re=Oe.Cartesian3.normalize(re,re);var se=Oe.Cartesian3.cross(ne,re,na);se=Oe.Cartesian3.normalize(se,se);var oe=Oe.Cartesian3.cross(re,ee,ra);oe=Oe.Cartesian3.normalize(oe,oe);var le=Oe.Cartesian3.subtract(G,B,ia);le=Oe.Cartesian3.normalize(le,le);var ue=Oe.Cartesian3.cross(j,le,sa);ue=Oe.Cartesian3.normalize(ue,ue);var ce=ae/x,Ce=U/x,de=0,he=0,pe=0;for(s&&(de=Oe.Cartesian3.distance(V,Y),q=Pe.EncodedCartesian3.fromCartesian(V,la),W=Oe.Cartesian3.subtract(Y,V,ua),Me=(Z=Oe.Cartesian3.normalize(W,ca)).x,Z.x=Z.y,Z.y=-Me,he=de/O,pe=J/O),S=0;S<8;S++){var fe=z+4*S,ge=N+2*S,me=fe+3,we=S<4?1:-1,ve=2===S||3===S||6===S||7===S?1:-1;Oe.Cartesian3.pack(te.high,y,fe),y[me]=ie.x,Oe.Cartesian3.pack(te.low,_,fe),_[me]=ie.y,Oe.Cartesian3.pack(oe,M,fe),M[me]=ie.z,Oe.Cartesian3.pack(ue,T,fe),T[me]=ce*we,Oe.Cartesian3.pack(se,E,fe);var ye=Ce*ve;0===ye&&ve<0&&(ye=9),E[me]=ye,s&&(u[fe]=q.high.x,u[fe+1]=q.high.y,u[fe+2]=q.low.x,u[fe+3]=q.low.y,C[fe]=-F.y,C[fe+1]=F.x,C[fe+2]=X.y,C[fe+3]=-X.x,c[fe]=W.x,c[fe+1]=W.y,c[fe+2]=Z.x,c[fe+3]=Z.y,d[ge]=he*we,0===(ye=pe*ve)&&ve<0&&(ye=9),d[ge+1]=ye)}var _e=Ue,ne=Je,re=We,ee=Ze,le=Oe.Rectangle.fromCartographicArray(Xe,qe),Me=Le.getMinimumMaximumHeights(le,h),le=Me.minimumTerrainHeight,Me=Me.maximumTerrainHeight;Q+=le,Q+=Me,Ne(K,$,le,Me,_e,re),Ne(B,G,le,Me,ne,ee);Me=Oe.Cartesian3.multiplyByScalar(se,be.CesiumMath.EPSILON5,Ca);Oe.Cartesian3.add(_e,Me,_e),Oe.Cartesian3.add(ne,Me,ne),Oe.Cartesian3.add(re,Me,re),Oe.Cartesian3.add(ee,Me,ee),De(_e,ne),De(re,ee),Oe.Cartesian3.pack(_e,v,D),Oe.Cartesian3.pack(ne,v,D+3),Oe.Cartesian3.pack(ee,v,D+6),Oe.Cartesian3.pack(re,v,D+9),Me=Oe.Cartesian3.multiplyByScalar(se,-2*be.CesiumMath.EPSILON5,Ca),Oe.Cartesian3.add(_e,Me,_e),Oe.Cartesian3.add(ne,Me,ne),Oe.Cartesian3.add(re,Me,re),Oe.Cartesian3.add(ee,Me,ee),De(_e,ne),De(re,ee),Oe.Cartesian3.pack(_e,v,D+12),Oe.Cartesian3.pack(ne,v,D+15),Oe.Cartesian3.pack(ee,v,D+18),Oe.Cartesian3.pack(re,v,D+21),R+=2,l+=3,N+=16,D+=24,z+=32,U+=ae,J+=de}var Te=l=0;for(o=0;o<p;o++){for(S=0;S<pa;S++)w[l+S]=ha[S]+Te;Te+=8,l+=pa}e=da;Ie.BoundingSphere.fromVertices(t,Oe.Cartesian3.ZERO,3,e[0]),Ie.BoundingSphere.fromVertices(i,Oe.Cartesian3.ZERO,3,e[1]);var Ee=Ie.BoundingSphere.fromBoundingSpheres(e);Ee.radius+=Q/(2*p);e={position:new ke.GeometryAttribute({componentDatatype:be.ComponentDatatype.DOUBLE,componentsPerAttribute:3,normalize:!1,values:v}),startHiAndForwardOffsetX:fa(y),startLoAndForwardOffsetY:fa(_),startNormalAndForwardOffsetZ:fa(M),endNormalAndTextureCoordinateNormalizationX:fa(T),rightNormalAndTextureCoordinateNormalizationY:fa(E)};s&&(e.startHiLo2D=fa(u),e.offsetAndRight2D=fa(c),e.startEndNormals2D=fa(C),e.texcoordNormalization2D=new ke.GeometryAttribute({componentDatatype:be.ComponentDatatype.FLOAT,componentsPerAttribute:2,normalize:!1,values:d}));return new ke.Geometry({attributes:e,indices:w,boundingSphere:Ee})}(o,C,b,P,O,I,s)}};var R=new Oe.Cartesian3,N=new Oe.Matrix3,D=new Ie.Quaternion;function xe(e,a,t,i){a=Se(t,a,R),a=Oe.Cartesian3.dot(a,e);if(Ae<a||a<w){t=Se(i,t,x),a=a<w?be.CesiumMath.PI_OVER_TWO:-be.CesiumMath.PI_OVER_TWO,a=Ie.Quaternion.fromAxisAngle(t,a,D),a=Oe.Matrix3.fromQuaternion(a,N);return Oe.Matrix3.multiplyByVector(a,e,e),!0}return!1}var z=new Oe.Cartographic,H=new Oe.Cartesian3,oe=new Oe.Cartesian3;function Re(e,a,t,i,n){var r=Oe.Cartographic.toCartesian(a,e._ellipsoid,H),s=Oe.Cartesian3.add(r,t,oe),o=!1,l=e._ellipsoid,u=l.cartesianToCartographic(s,z);Math.abs(a.longitude-u.longitude)>be.CesiumMath.PI_OVER_TWO&&(o=!0,s=Oe.Cartesian3.subtract(r,t,oe),u=l.cartesianToCartographic(s,z)),u.height=0;u=e.project(u,n);return(n=Oe.Cartesian3.subtract(u,i,n)).z=0,n=Oe.Cartesian3.normalize(n,n),o&&Oe.Cartesian3.negate(n,n),n}var le=new Oe.Cartesian3,ue=new Oe.Cartesian3;function Ne(e,a,t,i,n,r){var s=Oe.Cartesian3.subtract(a,e,le);Oe.Cartesian3.normalize(s,s);var t=Oe.Cartesian3.multiplyByScalar(s,t-X,ue);Oe.Cartesian3.add(e,t,n);t=Oe.Cartesian3.multiplyByScalar(s,i-q,ue);Oe.Cartesian3.add(a,t,r)}var ce=new Oe.Cartesian3;function De(e,a){var t=r.Plane.getPointDistance(Q,e),i=r.Plane.getPointDistance(Q,a),n=ce;be.CesiumMath.equalsEpsilon(t,0,be.CesiumMath.EPSILON2)?(n=Se(a,e,n),Oe.Cartesian3.multiplyByScalar(n,be.CesiumMath.EPSILON2,n),Oe.Cartesian3.add(e,n,e)):be.CesiumMath.equalsEpsilon(i,0,be.CesiumMath.EPSILON2)&&(n=Se(e,a,n),Oe.Cartesian3.multiplyByScalar(n,be.CesiumMath.EPSILON2,n),Oe.Cartesian3.add(a,n,a))}var ze=new Oe.Cartographic,He=new Oe.Cartographic,Be=new Oe.Cartesian3,Ge=new Oe.Cartesian3,je=new Oe.Cartesian3,Ve=new Oe.Cartesian3,Ye=new Oe.Cartesian3,Fe=new Oe.Cartesian3,Xe=[ze,He],qe=new Oe.Rectangle,We=new Oe.Cartesian3,Ze=new Oe.Cartesian3,Ue=new Oe.Cartesian3,Je=new Oe.Cartesian3,Qe=new Oe.Cartesian3,Ke=new Oe.Cartesian3,$e=new Oe.Cartesian3,ea=new Oe.Cartesian3,aa=new Oe.Cartesian3,ta=new Oe.Cartesian3,ia=new Oe.Cartesian3,na=new Oe.Cartesian3,ra=new Oe.Cartesian3,sa=new Oe.Cartesian3,oa=new Pe.EncodedCartesian3,la=new Pe.EncodedCartesian3,ua=new Oe.Cartesian3,ca=new Oe.Cartesian3,Ca=new Oe.Cartesian3,da=[new Ie.BoundingSphere,new Ie.BoundingSphere],ha=[0,2,1,0,3,2,0,7,3,0,4,7,0,5,4,0,1,5,5,7,4,5,6,7,5,2,6,5,1,2,3,6,2,3,7,6],pa=ha.length;function fa(e){return new ke.GeometryAttribute({componentDatatype:be.ComponentDatatype.FLOAT,componentsPerAttribute:4,normalize:!1,values:e})}return v._projectNormal=Re,function(e,a){return Le.initialize().then(function(){return B.defined(a)&&(e=v.unpack(e,a)),v.createGeometry(e)})}});
