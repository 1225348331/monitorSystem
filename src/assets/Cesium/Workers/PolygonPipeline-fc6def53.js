define(["exports","./Matrix2-fa56e6dd","./Check-ba987d16","./ComponentDatatype-bfa70d4a","./when-4bbc8319","./EllipsoidRhumbLine-7ae2cb99","./GeometryAttribute-20b31d3e","./WebGLConstants-1c8239cc"],function(e,R,t,O,I,D,b,r){"use strict";var E=s,n=s;function s(e,t,r){r=r||2;var n,s,i,o,a,l=t&&t.length,u=l?t[0]*r:e.length,g=c(e,0,u,r,!0),_=[];if(!g||g.next===g.prev)return _;if(l&&(g=function(e,t,r,n){var s,i,o,a,l=[];for(s=0,i=t.length;s<i;s++)o=t[s]*n,a=s<i-1?t[s+1]*n:e.length,(a=c(e,o,a,n,!1))===a.next&&(a.steiner=!0),l.push(function(e){var t=e,r=e;for(;(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next,t!==e;);return r}(a));for(l.sort(f),s=0;s<l.length;s++)r=function(e,t){var r=function(e,t){var r,n=t,s=e.x,i=e.y,o=-1/0;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){var a=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(a<=s&&o<a){if((o=a)===s){if(i===n.y)return n;if(i===n.next.y)return n.next}r=n.x<n.next.x?n:n.next}}}while(n=n.next,n!==t);if(!r)return null;if(s===o)return r;var l,u=r,g=r.x,_=r.y,d=1/0;n=r;for(;s>=n.x&&n.x>=g&&s!==n.x&&y(i<_?s:o,i,g,_,i<_?o:s,i,n.x,n.y)&&(l=Math.abs(i-n.y)/(s-n.x),S(n,e)&&(l<d||l===d&&(n.x>r.x||n.x===r.x&&function(e,t){return N(e.prev,e,t.prev)<0&&N(t.next,e,e.next)<0}(r,n)))&&(r=n,d=l)),n=n.next,n!==u;);return r}(e,t);if(!r)return t;var n=T(r,e),e=m(r,r.next);return m(n,n.next),t===r?e:t}(l[s],r),r=m(r,r.next);return r}(e,t,g,r)),e.length>80*r){for(var d=n=e[0],h=s=e[1],p=r;p<u;p+=r)(i=e[p])<d&&(d=i),(o=e[p+1])<h&&(h=o),n<i&&(n=i),s<o&&(s=o);a=0!==(a=Math.max(n-d,s-h))?1/a:0}return v(g,_,r,d,h,a),_}function c(e,t,r,n,s){var i,o;if(s===0<w(e,t,r,n))for(i=t;i<r;i+=n)o=a(i,e[i],e[i+1],o);else for(i=r-n;t<=i;i-=n)o=a(i,e[i],e[i+1],o);return o&&g(o,o.next)&&(d(o),o=o.next),o}function m(e,t){if(!e)return e;t=t||e;var r,n=e;do{if(r=!1,n.steiner||!g(n,n.next)&&0!==N(n.prev,n,n.next))n=n.next;else{if(d(n),(n=t=n.prev)===n.next)break;r=!0}}while(r||n!==t);return t}function v(e,t,r,n,s,i,o){if(e){!o&&i&&function(e,t,r,n){var s=e;for(;null===s.z&&(s.z=x(s.x,s.y,t,r,n)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next,s!==e;);s.prevZ.nextZ=null,s.prevZ=null,function(e){var t,r,n,s,i,o,a,l,u=1;do{for(r=e,i=e=null,o=0;r;){for(o++,n=r,t=a=0;t<u&&(a++,n=n.nextZ);t++);for(l=u;0<a||0<l&&n;)0!==a&&(0===l||!n||r.z<=n.z)?(r=(s=r).nextZ,a--):(n=(s=n).nextZ,l--),i?i.nextZ=s:e=s,s.prevZ=i,i=s;r=n}}while(i.nextZ=null,u*=2,1<o)}(s)}(e,n,s,i);for(var a,l,u=e;e.prev!==e.next;)if(a=e.prev,l=e.next,i?function(e,t,r,n){var s=e.prev,i=e,o=e.next;if(0<=N(s,i,o))return!1;var a=(s.x<i.x?s.x<o.x?s:o:i.x<o.x?i:o).x,l=(s.y<i.y?s.y<o.y?s:o:i.y<o.y?i:o).y,u=(s.x>i.x?s.x>o.x?s:o:i.x>o.x?i:o).x,g=(s.y>i.y?s.y>o.y?s:o:i.y>o.y?i:o).y,_=x(a,l,t,r,n),d=x(u,g,t,r,n),h=e.prevZ,p=e.nextZ;for(;h&&h.z>=_&&p&&p.z<=d;){if(h!==e.prev&&h!==e.next&&y(s.x,s.y,i.x,i.y,o.x,o.y,h.x,h.y)&&0<=N(h.prev,h,h.next))return!1;if(h=h.prevZ,p!==e.prev&&p!==e.next&&y(s.x,s.y,i.x,i.y,o.x,o.y,p.x,p.y)&&0<=N(p.prev,p,p.next))return!1;p=p.nextZ}for(;h&&h.z>=_;){if(h!==e.prev&&h!==e.next&&y(s.x,s.y,i.x,i.y,o.x,o.y,h.x,h.y)&&0<=N(h.prev,h,h.next))return!1;h=h.prevZ}for(;p&&p.z<=d;){if(p!==e.prev&&p!==e.next&&y(s.x,s.y,i.x,i.y,o.x,o.y,p.x,p.y)&&0<=N(p.prev,p,p.next))return!1;p=p.nextZ}return!0}(e,n,s,i):function(e){var t=e.prev,r=e,n=e.next;if(0<=N(t,r,n))return!1;var s=e.next.next;for(;s!==e.prev;){if(y(t.x,t.y,r.x,r.y,n.x,n.y,s.x,s.y)&&0<=N(s.prev,s,s.next))return!1;s=s.next}return!0}(e))t.push(a.i/r),t.push(e.i/r),t.push(l.i/r),d(e),e=l.next,u=l.next;else if((e=l)===u){o?1===o?v(e=function(e,t,r){var n=e;do{var s=n.prev,i=n.next.next}while(!g(s,i)&&_(s,n,n.next,i)&&S(s,i)&&S(i,s)&&(t.push(s.i/r),t.push(n.i/r),t.push(i.i/r),d(n),d(n.next),n=e=i),n=n.next,n!==e);return m(n)}(m(e),t,r),t,r,n,s,i,2):2===o&&function(e,t,r,n,s,i){var o=e;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&function(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&_(r,r.next,e,t))return!0}while(r=r.next,r!==e);return!1}(e,t)&&(S(e,t)&&S(t,e)&&function(e,t){var r=e,n=!1,s=(e.x+t.x)/2,i=(e.y+t.y)/2;for(;r.y>i!=r.next.y>i&&r.next.y!==r.y&&s<(r.next.x-r.x)*(i-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next,r!==e;);return n}(e,t)&&(N(e.prev,e,t.prev)||N(e,t.prev,t))||g(e,t)&&0<N(e.prev,e,e.next)&&0<N(t.prev,t,t.next))}(o,a)){var l=T(o,a);return o=m(o,o.next),l=m(l,l.next),v(o,t,r,n,s,i),v(l,t,r,n,s,i)}a=a.next}}while(o=o.next,o!==e)}(e,t,r,n,s,i):v(m(e),t,r,n,s,i,1);break}}}function f(e,t){return e.x-t.x}function x(e,t,r,n,s){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*s)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*s)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function y(e,t,r,n,s,i,o,a){return 0<=(s-o)*(t-a)-(e-o)*(i-a)&&0<=(e-o)*(n-a)-(r-o)*(t-a)&&0<=(r-o)*(i-a)-(s-o)*(n-a)}function N(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function g(e,t){return e.x===t.x&&e.y===t.y}function _(e,t,r,n){var s=u(N(e,t,r)),i=u(N(e,t,n)),o=u(N(r,n,e)),a=u(N(r,n,t));return s!==i&&o!==a||(0===s&&l(e,r,t)||(0===i&&l(e,n,t)||(0===o&&l(r,e,n)||!(0!==a||!l(r,t,n)))))}function l(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function u(e){return 0<e?1:e<0?-1:0}function S(e,t){return N(e.prev,e,e.next)<0?0<=N(e,t,e.next)&&0<=N(e,e.prev,t):N(e,t,e.prev)<0||N(e,e.next,t)<0}function T(e,t){var r=new o(e.i,e.x,e.y),n=new o(t.i,t.x,t.y),s=e.next,i=t.prev;return(e.next=t).prev=e,(r.next=s).prev=r,(n.next=r).prev=n,(i.next=n).prev=i,n}function a(e,t,r,n){r=new o(e,t,r);return n?(r.next=n.next,(r.prev=n).next.prev=r,n.next=r):(r.prev=r).next=r,r}function d(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function o(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function w(e,t,r,n){for(var s=0,i=t,o=r-n;i<r;i+=n)s+=(e[o]-e[i])*(e[i+1]+e[o+1]),o=i;return s}s.deviation=function(e,t,r,n){var s=t&&t.length,i=s?t[0]*r:e.length,o=Math.abs(w(e,0,i,r));if(s)for(var a=0,l=t.length;a<l;a++){var u=t[a]*r,g=a<l-1?t[a+1]*r:e.length;o-=Math.abs(w(e,u,g,r))}for(var _=0,a=0;a<n.length;a+=3){var d=n[a]*r,h=n[a+1]*r,p=n[a+2]*r;_+=Math.abs((e[d]-e[p])*(e[1+h]-e[1+d])-(e[d]-e[h])*(e[1+p]-e[1+d]))}return 0===o&&0===_?0:Math.abs((_-o)/o)},s.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},n=0,s=0;s<e.length;s++){for(var i=0;i<e[s].length;i++)for(var o=0;o<t;o++)r.vertices.push(e[s][i][o]);0<s&&(n+=e[s-1].length,r.holes.push(n))}return r},E.default=n;var G={DEBUG:!0,assert:function(e,t){if(G.DEBUG&&!e)throw new Error("Assertion failed"+(t?": "+t:""))},GLU_TESS_MAX_COORD:1e150,TRUE_PROJECT:!1,GLU_TESS_DEFAULT_TOLERANCE:0,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111,GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901}};G.PQHandle,G.geom={},G.geom.vertEq=function(e,t){return e.s===t.s&&e.t===t.t},G.geom.vertLeq=function(e,t){return e.s<t.s||e.s===t.s&&e.t<=t.t},G.geom.edgeEval=function(e,t,r){G.assert(G.geom.vertLeq(e,t)&&G.geom.vertLeq(t,r));var n=t.s-e.s,s=r.s-t.s;return 0<n+s?n<s?t.t-e.t+(e.t-r.t)*(n/(n+s)):t.t-r.t+(r.t-e.t)*(s/(n+s)):0},G.geom.edgeSign=function(e,t,r){G.assert(G.geom.vertLeq(e,t)&&G.geom.vertLeq(t,r));var n=t.s-e.s,s=r.s-t.s;return 0<n+s?(t.t-r.t)*n+(t.t-e.t)*s:0},G.geom.transLeq=function(e,t){return e.t<t.t||e.t===t.t&&e.s<=t.s},G.geom.transEval=function(e,t,r){G.assert(G.geom.transLeq(e,t)&&G.geom.transLeq(t,r));var n=t.t-e.t,s=r.t-t.t;return 0<n+s?n<s?t.s-e.s+(e.s-r.s)*(n/(n+s)):t.s-r.s+(r.s-e.s)*(s/(n+s)):0},G.geom.transSign=function(e,t,r){G.assert(G.geom.transLeq(e,t)&&G.geom.transLeq(t,r));var n=t.t-e.t,s=r.t-t.t;return 0<n+s?(t.s-r.s)*n+(t.s-e.s)*s:0},G.geom.edgeGoesLeft=function(e){return G.geom.vertLeq(e.dst(),e.org)},G.geom.edgeGoesRight=function(e){return G.geom.vertLeq(e.org,e.dst())},G.geom.vertL1dist=function(e,t){return Math.abs(e.s-t.s)+Math.abs(e.t-t.t)},G.geom.vertCCW=function(e,t,r){return 0<=e.s*(t.t-r.t)+t.s*(r.t-e.t)+r.s*(e.t-t.t)},G.geom.interpolate_=function(e,t,r,n){return(e=e<0?0:e)<=(r=r<0?0:r)?0===r?(t+n)/2:t+e/(e+r)*(n-t):n+r/(e+r)*(t-n)},G.geom.edgeIntersect=function(e,t,r,n,s){var i,o,a;G.geom.vertLeq(e,t)||(a=e,e=t,t=a),G.geom.vertLeq(r,n)||(a=r,r=n,n=a),G.geom.vertLeq(e,r)||(a=e,e=r,r=a,a=t,t=n,n=a),G.geom.vertLeq(r,t)?G.geom.vertLeq(t,n)?((i=G.geom.edgeEval(e,r,t))+(o=G.geom.edgeEval(r,t,n))<0&&(i=-i,o=-o),s.s=G.geom.interpolate_(i,r.s,o,t.s)):((i=G.geom.edgeSign(e,r,t))+(o=-G.geom.edgeSign(e,n,t))<0&&(i=-i,o=-o),s.s=G.geom.interpolate_(i,r.s,o,n.s)):s.s=(r.s+t.s)/2,G.geom.transLeq(e,t)||(a=e,e=t,t=a),G.geom.transLeq(r,n)||(a=r,r=n,n=a),G.geom.transLeq(e,r)||(a=e,e=r,r=a,a=t,t=n,n=a),G.geom.transLeq(r,t)?G.geom.transLeq(t,n)?((i=G.geom.transEval(e,r,t))+(o=G.geom.transEval(r,t,n))<0&&(i=-i,o=-o),s.t=G.geom.interpolate_(i,r.t,o,t.t)):((i=G.geom.transSign(e,r,t))+(o=-G.geom.transSign(e,n,t))<0&&(i=-i,o=-o),s.t=G.geom.interpolate_(i,r.t,o,n.t)):s.t=(r.t+t.t)/2},G.mesh={},G.mesh.makeEdge=function(e){var t=G.mesh.makeEdgePair_(e.eHead);return G.mesh.makeVertex_(t,e.vHead),G.mesh.makeVertex_(t.sym,e.vHead),G.mesh.makeFace_(t,e.fHead),t},G.mesh.meshSplice=function(e,t){var r=!1,n=!1;e!==t&&(t.org!==e.org&&(n=!0,G.mesh.killVertex_(t.org,e.org)),t.lFace!==e.lFace&&(r=!0,G.mesh.killFace_(t.lFace,e.lFace)),G.mesh.splice_(t,e),n||(G.mesh.makeVertex_(t,e.org),e.org.anEdge=e),r||(G.mesh.makeFace_(t,e.lFace),e.lFace.anEdge=e))},G.mesh.deleteEdge=function(e){var t=e.sym,r=!1;e.lFace!==e.rFace()&&(r=!0,G.mesh.killFace_(e.lFace,e.rFace())),e.oNext===e?G.mesh.killVertex_(e.org,null):(e.rFace().anEdge=e.oPrev(),e.org.anEdge=e.oNext,G.mesh.splice_(e,e.oPrev()),r||G.mesh.makeFace_(e,e.lFace)),t.oNext===t?(G.mesh.killVertex_(t.org,null),G.mesh.killFace_(t.lFace,null)):(e.lFace.anEdge=t.oPrev(),t.org.anEdge=t.oNext,G.mesh.splice_(t,t.oPrev())),G.mesh.killEdge_(e)},G.mesh.addEdgeVertex=function(e){var t=G.mesh.makeEdgePair_(e),r=t.sym;return G.mesh.splice_(t,e.lNext),t.org=e.dst(),G.mesh.makeVertex_(r,t.org),t.lFace=r.lFace=e.lFace,t},G.mesh.splitEdge=function(e){var t=G.mesh.addEdgeVertex(e).sym;return G.mesh.splice_(e.sym,e.sym.oPrev()),G.mesh.splice_(e.sym,t),e.sym.org=t.org,t.dst().anEdge=t.sym,t.sym.lFace=e.rFace(),t.winding=e.winding,t.sym.winding=e.sym.winding,t},G.mesh.connect=function(e,t){var r=!1,n=G.mesh.makeEdgePair_(e),s=n.sym;return t.lFace!==e.lFace&&(r=!0,G.mesh.killFace_(t.lFace,e.lFace)),G.mesh.splice_(n,e.lNext),G.mesh.splice_(s,t),n.org=e.dst(),s.org=t.org,n.lFace=s.lFace=e.lFace,e.lFace.anEdge=s,r||G.mesh.makeFace_(n,e.lFace),n},G.mesh.zapFace=function(e){var t=e.anEdge,r=t.lNext;do{var n,s,r=(s=r).lNext}while((s.lFace=null)===s.rFace()&&(s.oNext===s?G.mesh.killVertex_(s.org,null):(s.org.anEdge=s.oNext,G.mesh.splice_(s,s.oPrev())),(n=s.sym).oNext===n?G.mesh.killVertex_(n.org,null):(n.org.anEdge=n.oNext,G.mesh.splice_(n,n.oPrev())),G.mesh.killEdge_(s)),s!==t);var i=e.prev,e=e.next;(e.prev=i).next=e},G.mesh.meshUnion=function(e,t){var r=e.fHead,n=e.vHead,s=e.eHead,i=t.fHead,o=t.vHead,t=t.eHead;return i.next!==i&&(r.prev.next=i.next,i.next.prev=r.prev,(i.prev.next=r).prev=i.prev),o.next!==o&&(n.prev.next=o.next,o.next.prev=n.prev,(o.prev.next=n).prev=o.prev),t.next!==t&&(s.sym.next.sym.next=t.next,t.next.sym.next=s.sym.next,(t.sym.next.sym.next=s).sym.next=t.sym.next),e},G.mesh.deleteMesh=function(e){},G.mesh.makeEdgePair_=function(e){var t=new G.GluHalfEdge,r=new G.GluHalfEdge,n=e.sym.next;return(((r.next=n).sym.next=t).next=e).sym.next=r,t.sym=r,((t.oNext=t).lNext=r).sym=t,(r.oNext=r).lNext=t},G.mesh.splice_=function(e,t){var r=e.oNext,n=t.oNext;r.sym.lNext=t,(n.sym.lNext=e).oNext=n,t.oNext=r},G.mesh.makeVertex_=function(e,t){var r=t.prev,n=new G.GluVertex(t,r);r.next=n,(t.prev=n).anEdge=e;for(var s=e;s.org=n,(s=s.oNext)!==e;);},G.mesh.makeFace_=function(e,t){var r=t.prev,n=new G.GluFace(t,r);r.next=n,(t.prev=n).anEdge=e,n.inside=t.inside;for(var s=e;s.lFace=n,(s=s.lNext)!==e;);},G.mesh.killEdge_=function(e){var t=e.next,e=e.sym.next;(t.sym.next=e).sym.next=t},G.mesh.killVertex_=function(e,t){for(var r=e.anEdge,n=r;n.org=t,(n=n.oNext)!==r;);var s=e.prev,e=e.next;(e.prev=s).next=e},G.mesh.killFace_=function(e,t){for(var r=e.anEdge,n=r;n.lFace=t,(n=n.lNext)!==r;);var s=e.prev,e=e.next;(e.prev=s).next=e},G.normal={},G.normal.S_UNIT_X_=1,G.normal.S_UNIT_Y_=0,G.normal.projectPolygon=function(e,t,r,n){var s=!1,i=[t,r,n];0===t&&0===r&&0===n&&(G.normal.computeNormal_(e,i),s=!0);var r=G.normal.longAxis_(i),o=e.mesh.vHead;if(G.TRUE_PROJECT){G.normal.normalize_(i);var a=[0,0,0],l=[0,0,0];a[r]=0,a[(r+1)%3]=G.normal.S_UNIT_X_,a[(r+2)%3]=G.normal.S_UNIT_Y_;n=G.normal.dot_(a,i);for(a[0]-=n*i[0],a[1]-=n*i[1],a[2]-=n*i[2],G.normal.normalize_(a),l[0]=i[1]*a[2]-i[2]*a[1],l[1]=i[2]*a[0]-i[0]*a[2],l[2]=i[0]*a[1]-i[1]*a[0],G.normal.normalize_(l),d=o.next;d!==o;d=d.next)d.s=G.normal.dot_(d.coords,a),d.t=G.normal.dot_(d.coords,l)}else for(var u=(r+1)%3,g=(r+2)%3,_=0<i[r]?1:-1,d=o.next;d!==o;d=d.next)d.s=d.coords[u],d.t=_*d.coords[g];s&&G.normal.checkOrientation_(e)},G.normal.dot_=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},G.normal.normalize_=function(e){var t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2];G.assert(0<t),t=Math.sqrt(t),e[0]/=t,e[1]/=t,e[2]/=t},G.normal.longAxis_=function(e){var t=0;return Math.abs(e[1])>Math.abs(e[0])&&(t=1),t=Math.abs(e[2])>Math.abs(e[t])?2:t},G.normal.computeNormal_=function(e,t){for(var r=[-2*G.GLU_TESS_MAX_COORD,-2*G.GLU_TESS_MAX_COORD,-2*G.GLU_TESS_MAX_COORD],n=[2*G.GLU_TESS_MAX_COORD,2*G.GLU_TESS_MAX_COORD,2*G.GLU_TESS_MAX_COORD],s=[],i=[],o=e.mesh.vHead,a=o.next;a!==o;a=a.next)for(var l=0;l<3;++l){var u=a.coords[l];u<n[l]&&(n[l]=u,i[l]=a),u>r[l]&&(r[l]=u,s[l]=a)}var g=0;if(r[1]-n[1]>r[0]-n[0]&&(g=1),n[g=r[2]-n[2]>r[g]-n[g]?2:g]>=r[g])return t[0]=0,t[1]=0,void(t[2]=1);var _=0,e=i[g],d=s[g],h=[0,0,0],p=[e.coords[0]-d.coords[0],e.coords[1]-d.coords[1],e.coords[2]-d.coords[2]],c=[0,0,0];for(a=o.next;a!==o;a=a.next){c[0]=a.coords[0]-d.coords[0],c[1]=a.coords[1]-d.coords[1],c[2]=a.coords[2]-d.coords[2],h[0]=p[1]*c[2]-p[2]*c[1],h[1]=p[2]*c[0]-p[0]*c[2],h[2]=p[0]*c[1]-p[1]*c[0];var m=h[0]*h[0]+h[1]*h[1]+h[2]*h[2];_<m&&(_=m,t[0]=h[0],t[1]=h[1],t[2]=h[2])}_<=0&&(t[0]=t[1]=t[2]=0,t[G.normal.longAxis_(p)]=1)},G.normal.checkOrientation_=function(e){for(var t=0,r=e.mesh.fHead,n=r.next;n!==r;n=n.next){var s=n.anEdge;if(!(s.winding<=0))for(;t+=(s.org.s-s.dst().s)*(s.org.t+s.dst().t),(s=s.lNext)!==n.anEdge;);}if(t<0)for(var i=e.mesh.vHead,o=i.next;o!==i;o=o.next)o.t=-o.t},G.render={},G.render.renderMesh=function(e,t,r){for(var n=!1,s=-1,i=t.fHead.prev;i!==t.fHead;i=i.prev)if(i.inside){n||(e.callBeginCallback(G.primitiveType.GL_TRIANGLES),n=!0);var o,a=i.anEdge;G.assert(a.lNext.lNext.lNext===a,"renderMesh called with non-triangulated mesh");do{}while(!r||s!==(o=a.rFace().inside?0:1)&&e.callEdgeFlagCallback(!!(s=o)),e.callVertexCallback(a.org.data),(a=a.lNext)!==i.anEdge)}n&&e.callEndCallback()},G.render.renderBoundary=function(e,t){for(var r=t.fHead.next;r!==t.fHead;r=r.next)if(r.inside){e.callBeginCallback(G.primitiveType.GL_LINE_LOOP);for(var n=r.anEdge;e.callVertexCallback(n.org.data),(n=n.lNext)!==r.anEdge;);e.callEndCallback()}},G.sweep={},G.sweep.SENTINEL_COORD_=4*G.GLU_TESS_MAX_COORD,G.sweep.TOLERANCE_NONZERO_=!1,G.sweep.computeInterior=function(e){var t;for(e.fatalError=!1,G.sweep.removeDegenerateEdges_(e),G.sweep.initPriorityQ_(e),G.sweep.initEdgeDict_(e);null!==(t=e.pq.extractMin());){for(;;){var r=e.pq.minimum();if(null===r||!G.geom.vertEq(r,t))break;r=e.pq.extractMin(),G.sweep.spliceMergeVertices_(e,t.anEdge,r.anEdge)}G.sweep.sweepEvent_(e,t)}var n=e.dict.getMin().getKey();e.event=n.eUp.org,G.sweep.doneEdgeDict_(e),G.sweep.donePriorityQ_(e),G.sweep.removeDegenerateFaces_(e.mesh),e.mesh.checkMesh()},G.sweep.addWinding_=function(e,t){e.winding+=t.winding,e.sym.winding+=t.sym.winding},G.sweep.edgeLeq_=function(e,t,r){e=e.event,t=t.eUp,r=r.eUp;if(t.dst()===e)return r.dst()===e?G.geom.vertLeq(t.org,r.org)?G.geom.edgeSign(r.dst(),t.org,r.org)<=0:0<=G.geom.edgeSign(t.dst(),r.org,t.org):G.geom.edgeSign(r.dst(),e,r.org)<=0;if(r.dst()===e)return 0<=G.geom.edgeSign(t.dst(),e,t.org);t=G.geom.edgeEval(t.dst(),e,t.org);return G.geom.edgeEval(r.dst(),e,r.org)<=t},G.sweep.deleteRegion_=function(e,t){t.fixUpperEdge&&G.assert(0===t.eUp.winding),t.eUp.activeRegion=null,e.dict.deleteNode(t.nodeUp),t.nodeUp=null},G.sweep.fixUpperEdge_=function(e,t){G.assert(e.fixUpperEdge),G.mesh.deleteEdge(e.eUp),e.fixUpperEdge=!1,(e.eUp=t).activeRegion=e},G.sweep.topLeftRegion_=function(e){for(var t,r=e.eUp.org;(e=e.regionAbove()).eUp.org===r;);return e.fixUpperEdge&&(t=G.mesh.connect(e.regionBelow().eUp.sym,e.eUp.lNext),G.sweep.fixUpperEdge_(e,t),e=e.regionAbove()),e},G.sweep.topRightRegion_=function(e){for(var t=e.eUp.dst();(e=e.regionAbove()).eUp.dst()===t;);return e},G.sweep.addRegionBelow_=function(e,t,r){var n=new G.ActiveRegion;return n.eUp=r,n.nodeUp=e.dict.insertBefore(t.nodeUp,n),r.activeRegion=n},G.sweep.isWindingInside_=function(e,t){switch(e.windingRule){case G.windingRule.GLU_TESS_WINDING_ODD:return 0!=(1&t);case G.windingRule.GLU_TESS_WINDING_NONZERO:return 0!==t;case G.windingRule.GLU_TESS_WINDING_POSITIVE:return 0<t;case G.windingRule.GLU_TESS_WINDING_NEGATIVE:return t<0;case G.windingRule.GLU_TESS_WINDING_ABS_GEQ_TWO:return 2<=t||t<=-2}return G.assert(!1),!1},G.sweep.computeWinding_=function(e,t){t.windingNumber=t.regionAbove().windingNumber+t.eUp.winding,t.inside=G.sweep.isWindingInside_(e,t.windingNumber)},G.sweep.finishRegion_=function(e,t){var r=t.eUp,n=r.lFace;n.inside=t.inside,n.anEdge=r,G.sweep.deleteRegion_(e,t)},G.sweep.finishLeftRegions_=function(e,t,r){for(var n=t,s=t.eUp;n!==r;){n.fixUpperEdge=!1;var i=n.regionBelow(),o=i.eUp;if(o.org!==s.org){if(!i.fixUpperEdge){G.sweep.finishRegion_(e,n);break}o=G.mesh.connect(s.lPrev(),o.sym),G.sweep.fixUpperEdge_(i,o)}s.oNext!==o&&(G.mesh.meshSplice(o.oPrev(),o),G.mesh.meshSplice(s,o)),G.sweep.finishRegion_(e,n),s=i.eUp,n=i}return s},G.sweep.addRightEdges_=function(e,t,r,n,s,i){for(var o=!0,a=r;G.assert(G.geom.vertLeq(a.org,a.dst())),G.sweep.addRegionBelow_(e,t,a.sym),(a=a.oNext)!==n;);null===s&&(s=t.regionBelow().eUp.rPrev());for(var l,u=t,g=s;(a=(l=u.regionBelow()).eUp.sym).org===g.org;)a.oNext!==g&&(G.mesh.meshSplice(a.oPrev(),a),G.mesh.meshSplice(g.oPrev(),a)),l.windingNumber=u.windingNumber-a.winding,l.inside=G.sweep.isWindingInside_(e,l.windingNumber),u.dirty=!0,!o&&G.sweep.checkForRightSplice_(e,u)&&(G.sweep.addWinding_(a,g),G.sweep.deleteRegion_(e,u),G.mesh.deleteEdge(g)),o=!1,u=l,g=a;u.dirty=!0,G.assert(u.windingNumber-a.winding===l.windingNumber),i&&G.sweep.walkDirtyRegions_(e,u)},G.sweep.callCombine_=function(e,t,r,n,s){var i=[t.coords[0],t.coords[1],t.coords[2]];t.data=null,t.data=e.callCombineCallback(i,r,n),null===t.data&&(s?e.fatalError||(e.callErrorCallback(G.errorType.GLU_TESS_NEED_COMBINE_CALLBACK),e.fatalError=!0):t.data=r[0])},G.sweep.spliceMergeVertices_=function(e,t,r){var n=[null,null,null,null];n[0]=t.org.data,n[1]=r.org.data,G.sweep.callCombine_(e,t.org,n,[.5,.5,0,0],!1),G.mesh.meshSplice(t,r)},G.sweep.vertexWeights_=function(e,t,r,n,s){var i=G.geom.vertL1dist(t,e),o=G.geom.vertL1dist(r,e),a=s,s=s+1;n[a]=.5*o/(i+o),n[s]=.5*i/(i+o),e.coords[0]+=n[a]*t.coords[0]+n[s]*r.coords[0],e.coords[1]+=n[a]*t.coords[1]+n[s]*r.coords[1],e.coords[2]+=n[a]*t.coords[2]+n[s]*r.coords[2]},G.sweep.getIntersectData_=function(e,t,r,n,s,i){var o=[0,0,0,0],a=[r.data,n.data,s.data,i.data];t.coords[0]=t.coords[1]=t.coords[2]=0,G.sweep.vertexWeights_(t,r,n,o,0),G.sweep.vertexWeights_(t,s,i,o,2),G.sweep.callCombine_(e,t,a,o,!0)},G.sweep.checkForRightSplice_=function(e,t){var r=t.regionBelow(),n=t.eUp,s=r.eUp;if(G.geom.vertLeq(n.org,s.org)){if(0<G.geom.edgeSign(s.dst(),n.org,s.org))return!1;G.geom.vertEq(n.org,s.org)?n.org!==s.org&&(e.pq.remove(n.org.pqHandle),G.sweep.spliceMergeVertices_(e,s.oPrev(),n)):(G.mesh.splitEdge(s.sym),G.mesh.meshSplice(n,s.oPrev()),t.dirty=r.dirty=!0)}else{if(G.geom.edgeSign(n.dst(),s.org,n.org)<0)return!1;t.regionAbove().dirty=t.dirty=!0,G.mesh.splitEdge(n.sym),G.mesh.meshSplice(s.oPrev(),n)}return!0},G.sweep.checkForLeftSplice_=function(e,t){var r,n=t.regionBelow(),s=t.eUp,i=n.eUp;if(G.assert(!G.geom.vertEq(s.dst(),i.dst())),G.geom.vertLeq(s.dst(),i.dst())){if(G.geom.edgeSign(s.dst(),i.dst(),s.org)<0)return!1;t.regionAbove().dirty=t.dirty=!0,r=G.mesh.splitEdge(s),G.mesh.meshSplice(i.sym,r),r.lFace.inside=t.inside}else{if(0<G.geom.edgeSign(i.dst(),s.dst(),i.org))return!1;t.dirty=n.dirty=!0,r=G.mesh.splitEdge(i),G.mesh.meshSplice(s.lNext,i.sym),r.rFace().inside=t.inside}return!0},G.sweep.checkForIntersect_=function(e,t){var r=t.regionBelow(),n=t.eUp,s=r.eUp,i=n.org,o=s.org,a=n.dst(),l=s.dst(),u=new G.GluVertex;if(G.assert(!G.geom.vertEq(l,a)),G.assert(G.geom.edgeSign(a,e.event,i)<=0),G.assert(0<=G.geom.edgeSign(l,e.event,o)),G.assert(i!==e.event&&o!==e.event),G.assert(!t.fixUpperEdge&&!r.fixUpperEdge),i===o)return!1;var g=Math.min(i.t,a.t);if(Math.max(o.t,l.t)<g)return!1;if(G.geom.vertLeq(i,o)){if(0<G.geom.edgeSign(l,i,o))return!1}else if(G.geom.edgeSign(a,o,i)<0)return!1;G.geom.edgeIntersect(a,i,l,o,u),G.assert(Math.min(i.t,a.t)<=u.t),G.assert(u.t<=Math.max(o.t,l.t)),G.assert(Math.min(l.s,a.s)<=u.s),G.assert(u.s<=Math.max(o.s,i.s)),G.geom.vertLeq(u,e.event)&&(u.s=e.event.s,u.t=e.event.t);g=G.geom.vertLeq(i,o)?i:o;if(G.geom.vertLeq(g,u)&&(u.s=g.s,u.t=g.t),G.geom.vertEq(u,i)||G.geom.vertEq(u,o))return G.sweep.checkForRightSplice_(e,t),!1;if(!G.geom.vertEq(a,e.event)&&0<=G.geom.edgeSign(a,e.event,u)||!G.geom.vertEq(l,e.event)&&G.geom.edgeSign(l,e.event,u)<=0){if(l===e.event)return G.mesh.splitEdge(n.sym),G.mesh.meshSplice(s.sym,n),n=(t=G.sweep.topLeftRegion_(t)).regionBelow().eUp,G.sweep.finishLeftRegions_(e,t.regionBelow(),r),G.sweep.addRightEdges_(e,t,n.oPrev(),n,n,!0),!0;if(a!==e.event)return 0<=G.geom.edgeSign(a,e.event,u)&&(t.regionAbove().dirty=t.dirty=!0,G.mesh.splitEdge(n.sym),n.org.s=e.event.s,n.org.t=e.event.t),G.geom.edgeSign(l,e.event,u)<=0&&(t.dirty=r.dirty=!0,G.mesh.splitEdge(s.sym),s.org.s=e.event.s,s.org.t=e.event.t),!1;G.mesh.splitEdge(s.sym),G.mesh.meshSplice(n.lNext,s.oPrev());r=t,g=(t=G.sweep.topRightRegion_(t)).regionBelow().eUp.rPrev();return r.eUp=s.oPrev(),s=G.sweep.finishLeftRegions_(e,r,null),G.sweep.addRightEdges_(e,t,s.oNext,n.rPrev(),g,!0),!0}return G.mesh.splitEdge(n.sym),G.mesh.splitEdge(s.sym),G.mesh.meshSplice(s.oPrev(),n),n.org.s=u.s,n.org.t=u.t,n.org.pqHandle=e.pq.insert(n.org),G.sweep.getIntersectData_(e,n.org,i,a,o,l),!(t.regionAbove().dirty=t.dirty=r.dirty=!0)},G.sweep.walkDirtyRegions_=function(e,t){for(var r=t.regionBelow();;){for(;r.dirty;)r=(t=r).regionBelow();if(!(t.dirty||null!==(t=(r=t).regionAbove())&&t.dirty))return;t.dirty=!1;var n=t.eUp,s=r.eUp;if(n.dst()!==s.dst()&&G.sweep.checkForLeftSplice_(e,t)&&(r.fixUpperEdge?(G.sweep.deleteRegion_(e,r),G.mesh.deleteEdge(s),s=(r=t.regionBelow()).eUp):t.fixUpperEdge&&(G.sweep.deleteRegion_(e,t),G.mesh.deleteEdge(n),n=(t=r.regionAbove()).eUp)),n.org!==s.org)if(n.dst()===s.dst()||t.fixUpperEdge||r.fixUpperEdge||n.dst()!==e.event&&s.dst()!==e.event)G.sweep.checkForRightSplice_(e,t);else if(G.sweep.checkForIntersect_(e,t))return;n.org===s.org&&n.dst()===s.dst()&&(G.sweep.addWinding_(s,n),G.sweep.deleteRegion_(e,t),G.mesh.deleteEdge(n),t=r.regionAbove())}},G.sweep.connectRightVertex_=function(e,t,r){var n=r.oNext,s=t.regionBelow(),i=t.eUp,o=s.eUp,a=!1;i.dst()!==o.dst()&&G.sweep.checkForIntersect_(e,t),G.geom.vertEq(i.org,e.event)&&(G.mesh.meshSplice(n.oPrev(),i),n=(t=G.sweep.topLeftRegion_(t)).regionBelow().eUp,G.sweep.finishLeftRegions_(e,t.regionBelow(),s),a=!0),G.geom.vertEq(o.org,e.event)&&(G.mesh.meshSplice(r,o.oPrev()),r=G.sweep.finishLeftRegions_(e,s,null),a=!0),a?G.sweep.addRightEdges_(e,t,r.oNext,n,n,!0):(i=G.geom.vertLeq(o.org,i.org)?o.oPrev():i,i=G.mesh.connect(r.lPrev(),i),G.sweep.addRightEdges_(e,t,i,i.oNext,i.oNext,!1),i.sym.activeRegion.fixUpperEdge=!0,G.sweep.walkDirtyRegions_(e,t))},G.sweep.connectLeftDegenerate_=function(e,t,r){var n,s,i,o,a=t.eUp;return G.geom.vertEq(a.org,r)?(G.assert(G.sweep.TOLERANCE_NONZERO_),void(G.sweep.TOLERANCE_NONZERO_&&G.sweep.spliceMergeVertices_(e,a,r.anEdge))):G.geom.vertEq(a.dst(),r)?(G.assert(G.sweep.TOLERANCE_NONZERO_),void(G.sweep.TOLERANCE_NONZERO_&&(o=i=(s=(n=(t=G.sweep.topRightRegion_(t)).regionBelow()).eUp.sym).oNext,n.fixUpperEdge&&(G.assert(i!==s),G.sweep.deleteRegion_(e,n),G.mesh.deleteEdge(s),s=i.oPrev()),G.mesh.meshSplice(r.anEdge,s),G.geom.edgeGoesLeft(i)||(i=null),G.sweep.addRightEdges_(e,t,s.oNext,o,i,!0)))):(G.mesh.splitEdge(a.sym),t.fixUpperEdge&&(G.mesh.deleteEdge(a.oNext),t.fixUpperEdge=!1),G.mesh.meshSplice(r.anEdge,a),void G.sweep.sweepEvent_(e,r))},G.sweep.connectLeftVertex_=function(e,t){var r=new G.ActiveRegion;r.eUp=t.anEdge.sym;var n=e.dict.search(r).getKey(),s=n.regionBelow(),i=n.eUp,r=s.eUp;0!==G.geom.edgeSign(i.dst(),t,i.org)?(s=G.geom.vertLeq(r.dst(),i.dst())?n:s,n.inside||s.fixUpperEdge?(r=s===n?G.mesh.connect(t.anEdge.sym,i.lNext):G.mesh.connect(r.dNext(),t.anEdge).sym,s.fixUpperEdge?G.sweep.fixUpperEdge_(s,r):G.sweep.computeWinding_(e,G.sweep.addRegionBelow_(e,n,r)),G.sweep.sweepEvent_(e,t)):G.sweep.addRightEdges_(e,n,t.anEdge,t.anEdge,null,!0)):G.sweep.connectLeftDegenerate_(e,n,t)},G.sweep.sweepEvent_=function(e,t){for(var r=(e.event=t).anEdge;null===r.activeRegion;)if((r=r.oNext)===t.anEdge)return void G.sweep.connectLeftVertex_(e,t);var n=G.sweep.topLeftRegion_(r.activeRegion),s=n.regionBelow(),i=s.eUp,s=G.sweep.finishLeftRegions_(e,s,null);s.oNext===i?G.sweep.connectRightVertex_(e,n,s):G.sweep.addRightEdges_(e,n,s.oNext,i,i,!0)},G.sweep.addSentinel_=function(e,t){var r=new G.ActiveRegion,n=G.mesh.makeEdge(e.mesh);n.org.s=G.sweep.SENTINEL_COORD_,n.org.t=t,n.dst().s=-G.sweep.SENTINEL_COORD_,n.dst().t=t,e.event=n.dst(),r.eUp=n,r.windingNumber=0,r.inside=!1,r.fixUpperEdge=!1,r.sentinel=!0,r.dirty=!1,r.nodeUp=e.dict.insert(r)},G.sweep.initEdgeDict_=function(e){e.dict=new G.Dict(e,G.sweep.edgeLeq_),G.sweep.addSentinel_(e,-G.sweep.SENTINEL_COORD_),G.sweep.addSentinel_(e,G.sweep.SENTINEL_COORD_)},G.sweep.doneEdgeDict_=function(e){for(var t,r=0;null!==(t=e.dict.getMin().getKey());)t.sentinel||(G.assert(t.fixUpperEdge),G.assert(1==++r)),G.assert(0===t.windingNumber),G.sweep.deleteRegion_(e,t);e.dict=null},G.sweep.removeDegenerateEdges_=function(e){for(var t=e.mesh.eHead,r=t.next;r!==t;r=n){var n=r.next,s=r.lNext;G.geom.vertEq(r.org,r.dst())&&r.lNext.lNext!==r&&(G.sweep.spliceMergeVertices_(e,s,r),G.mesh.deleteEdge(r),s=(r=s).lNext),s.lNext===r&&(s!==r&&(s!==n&&s!==n.sym||(n=n.next),G.mesh.deleteEdge(s)),r!==n&&r!==n.sym||(n=n.next),G.mesh.deleteEdge(r))}},G.sweep.initPriorityQ_=function(e){var t=new G.PriorityQ;e.pq=t;for(var r=e.mesh.vHead,n=r.next;n!==r;n=n.next)n.pqHandle=t.insert(n);t.init()},G.sweep.donePriorityQ_=function(e){e.pq.deleteQ(),e.pq=null},G.sweep.removeDegenerateFaces_=function(e){for(var t=e.fHead.next;t!==e.fHead;t=r){var r=t.next,n=t.anEdge;G.assert(n.lNext!==n),n.lNext.lNext===n&&(G.sweep.addWinding_(n.oNext,n),G.mesh.deleteEdge(n))}},G.tessmono={},G.tessmono.tessellateMonoRegion_=function(e){var t=e.anEdge;for(G.assert(t.lNext!==t&&t.lNext.lNext!==t);G.geom.vertLeq(t.dst(),t.org);t=t.lPrev());for(;G.geom.vertLeq(t.org,t.dst());t=t.lNext);for(var r=t.lPrev();t.lNext!==r;)if(G.geom.vertLeq(t.dst(),r.org)){for(;r.lNext!==t&&(G.geom.edgeGoesLeft(r.lNext)||G.geom.edgeSign(r.org,r.dst(),r.lNext.dst())<=0);)r=G.mesh.connect(r.lNext,r).sym;r=r.lPrev()}else{for(;r.lNext!==t&&(G.geom.edgeGoesRight(t.lPrev())||0<=G.geom.edgeSign(t.dst(),t.org,t.lPrev().org));)t=G.mesh.connect(t,t.lPrev()).sym;t=t.lNext}for(G.assert(r.lNext!==t);r.lNext.lNext!==t;)r=G.mesh.connect(r.lNext,r).sym},G.tessmono.tessellateInterior=function(e){for(var t,r=e.fHead.next;r!==e.fHead;r=t)t=r.next,r.inside&&G.tessmono.tessellateMonoRegion_(r)},G.tessmono.discardExterior=function(e){for(var t,r=e.fHead.next;r!==e.fHead;r=t)t=r.next,r.inside||G.mesh.zapFace(r)},G.tessmono.setWindingNumber=function(e,t,r){for(var n,s=e.eHead.next;s!==e.eHead;s=n)n=s.next,s.rFace().inside!==s.lFace.inside?s.winding=s.lFace.inside?t:-t:r?G.mesh.deleteEdge(s):s.winding=0},G.Dict=function(e,t){this.head_=new G.DictNode,this.frame_=e,this.leq_=t},G.Dict.prototype.deleteDict_=function(){},G.Dict.prototype.insertBefore=function(e,t){for(;null!==(e=e.prev).key&&!this.leq_(this.frame_,e.key,t););var r=new G.DictNode(t,e.next,e);return e.next.prev=r,e.next=r},G.Dict.prototype.insert=function(e){return this.insertBefore(this.head_,e)},G.Dict.prototype.deleteNode=function(e){e.next.prev=e.prev,e.prev.next=e.next},G.Dict.prototype.search=function(e){for(var t=this.head_;null!==(t=t.next).key&&!this.leq_(this.frame_,e,t.key););return t},G.Dict.prototype.getMin=function(){return this.head_.next},G.Dict.prototype.getMax=function(){return this.head_.prev},G.DictNode=function(e,t,r){this.key=e||null,this.next=t||this,this.prev=r||this},G.DictNode.prototype.getKey=function(){return this.key},G.DictNode.prototype.getSuccessor=function(){return this.next},G.DictNode.prototype.getPredecessor=function(){return this.prev},G.GluTesselator=function(){this.state_=G.GluTesselator.tessState_.T_DORMANT,this.lastEdge_=null,this.mesh=null,this.errorCallback_=null,this.normal_=[0,0,0],this.windingRule=G.windingRule.GLU_TESS_WINDING_ODD,this.fatalError=!1,this.dict=null,this.pq=null,this.event=null,this.combineCallback_=null,this.boundaryOnly_=!1,this.beginCallback_=null,this.edgeFlagCallback_=null,this.vertexCallback_=null,this.endCallback_=null,this.meshCallback_=null,this.polygonData_=null},G.GluTesselator.tessState_={T_DORMANT:0,T_IN_POLYGON:1,T_IN_CONTOUR:2},G.GluTesselator.prototype.gluDeleteTess=function(){this.requireState_(G.GluTesselator.tessState_.T_DORMANT)},G.GluTesselator.prototype.gluTessProperty=function(e,t){switch(e){case G.gluEnum.GLU_TESS_TOLERANCE:return;case G.gluEnum.GLU_TESS_WINDING_RULE:var r=t;switch(r){case G.windingRule.GLU_TESS_WINDING_ODD:case G.windingRule.GLU_TESS_WINDING_NONZERO:case G.windingRule.GLU_TESS_WINDING_POSITIVE:case G.windingRule.GLU_TESS_WINDING_NEGATIVE:case G.windingRule.GLU_TESS_WINDING_ABS_GEQ_TWO:return void(this.windingRule=r)}break;case G.gluEnum.GLU_TESS_BOUNDARY_ONLY:return void(this.boundaryOnly_=!!t);default:return void this.callErrorCallback(G.gluEnum.GLU_INVALID_ENUM)}this.callErrorCallback(G.gluEnum.GLU_INVALID_VALUE)},G.GluTesselator.prototype.gluGetTessProperty=function(e){switch(e){case G.gluEnum.GLU_TESS_TOLERANCE:return 0;case G.gluEnum.GLU_TESS_WINDING_RULE:var t=this.windingRule;return G.assert(t===G.windingRule.GLU_TESS_WINDING_ODD||t===G.windingRule.GLU_TESS_WINDING_NONZERO||t===G.windingRule.GLU_TESS_WINDING_POSITIVE||t===G.windingRule.GLU_TESS_WINDING_NEGATIVE||t===G.windingRule.GLU_TESS_WINDING_ABS_GEQ_TWO),t;case G.gluEnum.GLU_TESS_BOUNDARY_ONLY:return G.assert(!0===this.boundaryOnly_||!1===this.boundaryOnly_),this.boundaryOnly_;default:this.callErrorCallback(G.gluEnum.GLU_INVALID_ENUM)}return!1},G.GluTesselator.prototype.gluTessNormal=function(e,t,r){this.normal_[0]=e,this.normal_[1]=t,this.normal_[2]=r},G.GluTesselator.prototype.gluTessCallback=function(e,t){var r=t||null;switch(e){case G.gluEnum.GLU_TESS_BEGIN:case G.gluEnum.GLU_TESS_BEGIN_DATA:return void(this.beginCallback_=r);case G.gluEnum.GLU_TESS_EDGE_FLAG:case G.gluEnum.GLU_TESS_EDGE_FLAG_DATA:return void(this.edgeFlagCallback_=r);case G.gluEnum.GLU_TESS_VERTEX:case G.gluEnum.GLU_TESS_VERTEX_DATA:return void(this.vertexCallback_=r);case G.gluEnum.GLU_TESS_END:case G.gluEnum.GLU_TESS_END_DATA:return void(this.endCallback_=r);case G.gluEnum.GLU_TESS_ERROR:case G.gluEnum.GLU_TESS_ERROR_DATA:return void(this.errorCallback_=r);case G.gluEnum.GLU_TESS_COMBINE:case G.gluEnum.GLU_TESS_COMBINE_DATA:return void(this.combineCallback_=r);case G.gluEnum.GLU_TESS_MESH:return void(this.meshCallback_=r);default:return void this.callErrorCallback(G.gluEnum.GLU_INVALID_ENUM)}},G.GluTesselator.prototype.gluTessVertex=function(e,t){var r=!1,n=[0,0,0];this.requireState_(G.GluTesselator.tessState_.T_IN_CONTOUR);for(var s=0;s<3;++s){var i=e[s];i<-G.GLU_TESS_MAX_COORD&&(i=-G.GLU_TESS_MAX_COORD,r=!0),i>G.GLU_TESS_MAX_COORD&&(i=G.GLU_TESS_MAX_COORD,r=!0),n[s]=i}r&&this.callErrorCallback(G.errorType.GLU_TESS_COORD_TOO_LARGE),this.addVertex_(n,t)},G.GluTesselator.prototype.gluTessBeginPolygon=function(e){this.requireState_(G.GluTesselator.tessState_.T_DORMANT),this.state_=G.GluTesselator.tessState_.T_IN_POLYGON,this.mesh=new G.GluMesh,this.polygonData_=e},G.GluTesselator.prototype.gluTessBeginContour=function(){this.requireState_(G.GluTesselator.tessState_.T_IN_POLYGON),this.state_=G.GluTesselator.tessState_.T_IN_CONTOUR,this.lastEdge_=null},G.GluTesselator.prototype.gluTessEndContour=function(){this.requireState_(G.GluTesselator.tessState_.T_IN_CONTOUR),this.state_=G.GluTesselator.tessState_.T_IN_POLYGON},G.GluTesselator.prototype.gluTessEndPolygon=function(){if(this.requireState_(G.GluTesselator.tessState_.T_IN_POLYGON),this.state_=G.GluTesselator.tessState_.T_DORMANT,G.normal.projectPolygon(this,this.normal_[0],this.normal_[1],this.normal_[2]),G.sweep.computeInterior(this),!this.fatalError){var e=this.mesh;if(this.boundaryOnly_?G.tessmono.setWindingNumber(e,1,!0):G.tessmono.tessellateInterior(e),this.mesh.checkMesh(),(this.beginCallback_||this.endCallback_||this.vertexCallback_||this.edgeFlagCallback_)&&(this.boundaryOnly_?G.render.renderBoundary(this,this.mesh):(e=!!this.edgeFlagCallback_,G.render.renderMesh(this,this.mesh,e))),this.meshCallback_)return G.tessmono.discardExterior(this.mesh),this.meshCallback_(this.mesh),this.mesh=null,void(this.polygonData_=null)}G.mesh.deleteMesh(this.mesh),this.polygonData_=null,this.mesh=null},G.GluTesselator.prototype.requireState_=function(e){this.state_!==e&&this.gotoState_(e)},G.GluTesselator.prototype.gotoState_=function(e){for(;this.state_!==e;)if(this.state_<e)switch(this.state_){case G.GluTesselator.tessState_.T_DORMANT:this.callErrorCallback(G.errorType.GLU_TESS_MISSING_BEGIN_POLYGON),this.gluTessBeginPolygon(null);break;case G.GluTesselator.tessState_.T_IN_POLYGON:this.callErrorCallback(G.errorType.GLU_TESS_MISSING_BEGIN_CONTOUR),this.gluTessBeginContour()}else switch(this.state_){case G.GluTesselator.tessState_.T_IN_CONTOUR:this.callErrorCallback(G.errorType.GLU_TESS_MISSING_END_CONTOUR),this.gluTessEndContour();break;case G.GluTesselator.tessState_.T_IN_POLYGON:this.callErrorCallback(G.errorType.GLU_TESS_MISSING_END_POLYGON),this.gluTessEndPolygon()}},G.GluTesselator.prototype.addVertex_=function(e,t){var r=this.lastEdge_;null===r?(r=G.mesh.makeEdge(this.mesh),G.mesh.meshSplice(r,r.sym)):(G.mesh.splitEdge(r),r=r.lNext),r.org.data=t,r.org.coords[0]=e[0],r.org.coords[1]=e[1],r.org.coords[2]=e[2],r.winding=1,r.sym.winding=-1,this.lastEdge_=r},G.GluTesselator.prototype.callBeginCallback=function(e){this.beginCallback_&&this.beginCallback_(e,this.polygonData_)},G.GluTesselator.prototype.callVertexCallback=function(e){this.vertexCallback_&&this.vertexCallback_(e,this.polygonData_)},G.GluTesselator.prototype.callEdgeFlagCallback=function(e){this.edgeFlagCallback_&&this.edgeFlagCallback_(e,this.polygonData_)},G.GluTesselator.prototype.callEndCallback=function(){this.endCallback_&&this.endCallback_(this.polygonData_)},G.GluTesselator.prototype.callCombineCallback=function(e,t,r){return this.combineCallback_&&this.combineCallback_(e,t,r,this.polygonData_)||null},G.GluTesselator.prototype.callErrorCallback=function(e){this.errorCallback_&&this.errorCallback_(e,this.polygonData_)},G.GluFace=function(e,t){this.next=e||this,this.prev=t||this,this.anEdge=null,this.inside=!1},G.GluHalfEdge=function(e){this.next=e||this,this.sym=null,this.oNext=null,this.lNext=null,this.org=null,this.lFace=null,this.activeRegion=null,this.winding=0},G.GluHalfEdge.prototype.rFace=function(){return this.sym.lFace},G.GluHalfEdge.prototype.dst=function(){return this.sym.org},G.GluHalfEdge.prototype.oPrev=function(){return this.sym.lNext},G.GluHalfEdge.prototype.lPrev=function(){return this.oNext.sym},G.GluHalfEdge.prototype.dPrev=function(){return this.lNext.sym},G.GluHalfEdge.prototype.rPrev=function(){return this.sym.oNext},G.GluHalfEdge.prototype.dNext=function(){return this.rPrev().sym},G.GluHalfEdge.prototype.rNext=function(){return this.oPrev().sym},G.GluMesh=function(){this.vHead=new G.GluVertex,this.fHead=new G.GluFace,this.eHead=new G.GluHalfEdge,this.eHeadSym=new G.GluHalfEdge,this.eHead.sym=this.eHeadSym,this.eHeadSym.sym=this.eHead},G.GluMesh.prototype.checkMesh=function(){if(G.DEBUG){for(var e,t,r,n=this.fHead,s=this.vHead,i=this.eHead,o=n,o=n;(t=o.next)!==n;o=t)for(G.assert(t.prev===o),e=t.anEdge;G.assert(e.sym!==e),G.assert(e.sym.sym===e),G.assert(e.lNext.oNext.sym===e),G.assert(e.oNext.sym.lNext===e),G.assert(e.lFace===t),(e=e.lNext)!==t.anEdge;);G.assert(t.prev===o&&null===t.anEdge);for(var a=s,a=s;(r=a.next)!==s;a=r)for(G.assert(r.prev===a),e=r.anEdge;G.assert(e.sym!==e),G.assert(e.sym.sym===e),G.assert(e.lNext.oNext.sym===e),G.assert(e.oNext.sym.lNext===e),G.assert(e.org===r),(e=e.oNext)!==r.anEdge;);G.assert(r.prev===a&&null===r.anEdge&&null===r.data);for(var l=i,l=i;(e=l.next)!==i;l=e)G.assert(e.sym.next===l.sym),G.assert(e.sym!==e),G.assert(e.sym.sym===e),G.assert(null!==e.org),G.assert(null!==e.dst()),G.assert(e.lNext.oNext.sym===e),G.assert(e.oNext.sym.lNext===e);G.assert(e.sym.next===l.sym&&e.sym===this.eHeadSym&&e.sym.sym===e&&null===e.org&&null===e.dst()&&null===e.lFace&&null===e.rFace())}},G.GluVertex=function(e,t){this.next=e||this,this.prev=t||this,this.anEdge=null,this.data=null,this.coords=[0,0,0],this.s=0,this.t=0,this.pqHandle=0},G.PriorityQ=function(){this.verts_=[],this.order_=null,this.size_=0,this.initialized_=!1,this.heap_=new G.PriorityQHeap},G.PriorityQ.prototype.deleteQ=function(){this.heap_=null,this.order_=null,this.verts_=null},G.PriorityQ.prototype.init=function(){this.order_=[];for(var e=0;e<this.size_;e++)this.order_[e]=e;var r,t=(r=this.verts_,function(e,t){return G.geom.vertLeq(r[e],r[t])?1:-1});if(this.order_.sort(t),this.initialized_=!0,this.heap_.init(),G.DEBUG)for(var n=0+this.size_-1,e=0;e<n;++e)G.assert(G.geom.vertLeq(this.verts_[this.order_[e+1]],this.verts_[this.order_[e]]))},G.PriorityQ.prototype.insert=function(e){if(this.initialized_)return this.heap_.insert(e);var t=this.size_++;return this.verts_[t]=e,-(1+t)},G.PriorityQ.prototype.extractMin=function(){if(0===this.size_)return this.heap_.extractMin();var e=this.verts_[this.order_[this.size_-1]];if(!this.heap_.isEmpty()){var t=this.heap_.minimum();if(G.geom.vertLeq(t,e))return this.heap_.extractMin()}for(;--this.size_,0<this.size_&&null===this.verts_[this.order_[this.size_-1]];);return e},G.PriorityQ.prototype.minimum=function(){if(0===this.size_)return this.heap_.minimum();var e=this.verts_[this.order_[this.size_-1]];if(!this.heap_.isEmpty()){var t=this.heap_.minimum();if(G.geom.vertLeq(t,e))return t}return e},G.PriorityQ.prototype.remove=function(e){if(0<=e)this.heap_.remove(e);else for(G.assert((e=-(e+1))<this.verts_.length&&null!==this.verts_[e]),this.verts_[e]=null;0<this.size_&&null===this.verts_[this.order_[this.size_-1]];)--this.size_},G.PriorityQHeap=function(){this.heap_=G.PriorityQHeap.reallocNumeric_([0],G.PriorityQHeap.INIT_SIZE_+1),this.verts_=[null,null],this.handles_=[0,0],this.size_=0,this.max_=G.PriorityQHeap.INIT_SIZE_,this.freeList_=0,this.initialized_=!1,this.heap_[1]=1},G.PriorityQHeap.INIT_SIZE_=32,G.PriorityQHeap.reallocNumeric_=function(e,t){for(var r=new Array(t),n=0;n<e.length;n++)r[n]=e[n];for(;n<t;n++)r[n]=0;return r},G.PriorityQHeap.prototype.init=function(){for(var e=this.size_;1<=e;--e)this.floatDown_(e);this.initialized_=!0},G.PriorityQHeap.prototype.insert=function(e){var t,r=++this.size_;return 2*r>this.max_&&(this.max_*=2,this.handles_=G.PriorityQHeap.reallocNumeric_(this.handles_,this.max_+1)),0===this.freeList_?t=r:(t=this.freeList_,this.freeList_=this.handles_[this.freeList_]),this.verts_[t]=e,this.handles_[t]=r,this.heap_[r]=t,this.initialized_&&this.floatUp_(r),t},G.PriorityQHeap.prototype.isEmpty=function(){return 0===this.size_},G.PriorityQHeap.prototype.minimum=function(){return this.verts_[this.heap_[1]]},G.PriorityQHeap.prototype.extractMin=function(){var e=this.heap_,t=this.verts_,r=this.handles_,n=e[1],s=t[n];return 0<this.size_&&(e[1]=e[this.size_],r[e[1]]=1,t[n]=null,r[n]=this.freeList_,this.freeList_=n,0<--this.size_&&this.floatDown_(1)),s},G.PriorityQHeap.prototype.remove=function(e){var t=this.heap_,r=this.verts_,n=this.handles_;G.assert(1<=e&&e<=this.max_&&null!==r[e]);var s,i=n[e];t[i]=t[this.size_],(n[t[i]]=i)<=--this.size_&&(i<=1?this.floatDown_(i):(s=r[t[i]],t=r[t[i>>1]],G.geom.vertLeq(t,s)?this.floatDown_(i):this.floatUp_(i))),r[e]=null,n[e]=this.freeList_,this.freeList_=e},G.PriorityQHeap.prototype.floatDown_=function(e){for(var t=this.heap_,r=this.verts_,n=this.handles_,s=e,i=t[s];;){var o=s<<1;o<this.size_&&G.geom.vertLeq(r[t[o+1]],r[t[o]])&&(o+=1),G.assert(o<=this.max_);var a=t[o];if(o>this.size_||G.geom.vertLeq(r[i],r[a]))return void(n[t[s]=i]=s);n[t[s]=a]=s,s=o}},G.PriorityQHeap.prototype.floatUp_=function(e){for(var t=this.heap_,r=this.verts_,n=this.handles_,s=e,i=t[s];;){var o=s>>1,a=t[o];if(0==o||G.geom.vertLeq(r[a],r[i]))return void(n[t[s]=i]=s);n[t[s]=a]=s,s=o}},G.ActiveRegion=function(){this.eUp=null,this.nodeUp=null,this.windingNumber=0,this.inside=!1,this.sentinel=!1,this.dirty=!1,this.fixUpperEdge=!1},G.ActiveRegion.prototype.regionBelow=function(){return this.nodeUp.getPredecessor().getKey()},G.ActiveRegion.prototype.regionAbove=function(){return this.nodeUp.getSuccessor().getKey()};var i={CLOCKWISE:r.WebGLConstants.CW,COUNTER_CLOCKWISE:r.WebGLConstants.CCW,validate:function(e){return e===i.CLOCKWISE||e===i.COUNTER_CLOCKWISE}},h=Object.freeze(i),p=new R.Cartesian3,L=new R.Cartesian3;function U(){var e=new G.GluTesselator;return e.gluTessCallback(G.gluEnum.GLU_TESS_VERTEX_DATA,function(e,t){t[t.length]=e[0],t[t.length]=e[1]}),e.gluTessCallback(G.gluEnum.GLU_TESS_BEGIN,function(e){e!==G.primitiveType.GL_TRIANGLES&&console.log("expected TRIANGLES but got type: "+e)}),e.gluTessCallback(G.gluEnum.GLU_TESS_ERROR,function(e){console.log("error callback"),console.log("error number: "+e)}),e.gluTessCallback(G.gluEnum.GLU_TESS_COMBINE,function(e,t,r){return[e[0],e[1],e[2]]}),e.gluTessCallback(G.gluEnum.GLU_TESS_EDGE_FLAG,function(e){}),e}var C=null;var A={computeArea2D:function(e){for(var t=e.length,r=0,n=t-1,s=0;s<t;n=s++){var i=e[n],o=e[s];r+=i.x*o.y-o.x*i.y}return.5*r},computeWindingOrder2D:function(e){return 0<A.computeArea2D(e)?h.COUNTER_CLOCKWISE:h.CLOCKWISE}};A.triangulate=function(e,t,r){if(1===r){for(var n=[],s=0,i=0;i<t.length;i++){for(var o=t[i],a=[],l=s;l<o;l++)a.push([e[l].x,e[l].y]);n.push(a),s=o}var u=function(e){(C=C||U()).gluTessNormal(0,0,1);var t=[];C.gluTessBeginPolygon(t);for(var r=0;r<e.length;r++){C.gluTessBeginContour();for(var n=e[r],s=0;s<n.length;s++){var i=[n[s][0],n[s][1],0];C.gluTessVertex(i,i)}C.gluTessEndContour()}return C.gluTessEndPolygon(),t}(n),g=u.length/2;if(g<3){var _=R.Cartesian2.packArray(e);return E(_,t,2)}var d=[],h=[],p=new Map;for(let e=0;e<g;e++){var c,m=u[2*e+0],v=u[2*e+1],f=m+"_"+v;p.has(f)?(c=p.get(f),h.push(c)):(c=d.length,p.set(f,c),v=R.Cartesian3.fromDegrees(m,v,0),d.push(v),h.push(c))}return{positions:d,indices:h}}_=R.Cartesian2.packArray(e);return E(_,t,2)};var k=new R.Cartesian3,P=new R.Cartesian3,M=new R.Cartesian3,F=new R.Cartesian3,q=new R.Cartesian3,B=new R.Cartesian3,H=new R.Cartesian3;A.computeSubdivision=function(e,t,r,n,s){n=I.defaultValue(n,O.CesiumMath.RADIANS_PER_DEGREE);for(var i=r.slice(0),o=t.length,a=new Array(3*o),l=0,u=0;u<o;u++){var g=t[u];a[l++]=g.x,a[l++]=g.y,a[l++]=g.z}for(var _=[],d={},h=e.maximumRadius,n=O.CesiumMath.chordLength(n,h),p=n*n,c=i.length;0<i.length;){var m=i.pop(),v=i.pop(),f=i.pop(),E=R.Cartesian3.fromArray(a,3*f,k),x=R.Cartesian3.fromArray(a,3*v,P),y=R.Cartesian3.fromArray(a,3*m,M),N=!1;s&&3*f<=c&&3*v<=c&&3*m<=c&&(N=!0);var S,T,w=R.Cartesian3.multiplyByScalar(R.Cartesian3.normalize(E,F),h,F),G=R.Cartesian3.multiplyByScalar(R.Cartesian3.normalize(x,q),h,q),L=R.Cartesian3.multiplyByScalar(R.Cartesian3.normalize(y,B),h,B),U=R.Cartesian3.magnitudeSquared(R.Cartesian3.subtract(w,G,H)),G=R.Cartesian3.magnitudeSquared(R.Cartesian3.subtract(G,L,H)),L=R.Cartesian3.magnitudeSquared(R.Cartesian3.subtract(L,w,H)),w=Math.max(U,G,L);p<w?U===w?(u=d[S=Math.min(f,v)+" "+Math.max(f,v)],I.defined(u)||(T=R.Cartesian3.add(E,x,H),R.Cartesian3.multiplyByScalar(T,.5,T),N&&R.Cartesian3.multiplyByScalar(T,-1,T),a.push(T.x,T.y,T.z),u=a.length/3-1,d[S]=u),i.push(f,u,m),i.push(u,v,m)):G===w?(u=d[S=Math.min(v,m)+" "+Math.max(v,m)],I.defined(u)||(T=R.Cartesian3.add(x,y,H),R.Cartesian3.multiplyByScalar(T,.5,T),N&&R.Cartesian3.multiplyByScalar(T,-1,T),a.push(T.x,T.y,T.z),u=a.length/3-1,d[S]=u),i.push(v,u,f),i.push(u,m,f)):L===w&&(u=d[S=Math.min(m,f)+" "+Math.max(m,f)],I.defined(u)||(T=R.Cartesian3.add(y,E,H),R.Cartesian3.multiplyByScalar(T,.5,T),N&&R.Cartesian3.multiplyByScalar(T,-1,T),a.push(T.x,T.y,T.z),u=a.length/3-1,d[S]=u),i.push(m,u,v),i.push(u,f,v)):(_.push(f),_.push(v),_.push(m))}return new b.Geometry({attributes:{position:new b.GeometryAttribute({componentDatatype:O.ComponentDatatype.DOUBLE,componentsPerAttribute:3,values:a})},indices:_,primitiveType:b.PrimitiveType.TRIANGLES})};var z=new R.Cartographic,V=new R.Cartographic,W=new R.Cartographic,Z=new R.Cartographic;A.computeRhumbLineSubdivision=function(e,t,r,n){n=I.defaultValue(n,O.CesiumMath.RADIANS_PER_DEGREE);for(var s=r.slice(0),i=t.length,o=new Array(3*i),a=0,l=0;l<i;l++){var u=t[l];o[a++]=u.x,o[a++]=u.y,o[a++]=u.z}for(var g=[],_={},r=e.maximumRadius,d=O.CesiumMath.chordLength(n,r),h=new D.EllipsoidRhumbLine(void 0,void 0,e),p=new D.EllipsoidRhumbLine(void 0,void 0,e),c=new D.EllipsoidRhumbLine(void 0,void 0,e);0<s.length;){var m=s.pop(),v=s.pop(),f=s.pop(),E=R.Cartesian3.fromArray(o,3*f,k),x=R.Cartesian3.fromArray(o,3*v,P),y=R.Cartesian3.fromArray(o,3*m,M),N=e.cartesianToCartographic(E,z),S=e.cartesianToCartographic(x,V),T=e.cartesianToCartographic(y,W);h.setEndPoints(N,S);var w=h.surfaceDistance;p.setEndPoints(S,T);E=p.surfaceDistance;c.setEndPoints(T,N);var G,L,U,C,x=c.surfaceDistance,y=Math.max(w,E,x);d<y?w===y?(l=_[G=Math.min(f,v)+" "+Math.max(f,v)],I.defined(l)||(L=h.interpolateUsingFraction(.5,Z),U=.5*(N.height+S.height),C=R.Cartesian3.fromRadians(L.longitude,L.latitude,U,e,H),o.push(C.x,C.y,C.z),l=o.length/3-1,_[G]=l),s.push(f,l,m),s.push(l,v,m)):E===y?(l=_[G=Math.min(v,m)+" "+Math.max(v,m)],I.defined(l)||(L=p.interpolateUsingFraction(.5,Z),U=.5*(S.height+T.height),C=R.Cartesian3.fromRadians(L.longitude,L.latitude,U,e,H),o.push(C.x,C.y,C.z),l=o.length/3-1,_[G]=l),s.push(v,l,f),s.push(l,m,f)):x===y&&(l=_[G=Math.min(m,f)+" "+Math.max(m,f)],I.defined(l)||(L=c.interpolateUsingFraction(.5,Z),U=.5*(T.height+N.height),C=R.Cartesian3.fromRadians(L.longitude,L.latitude,U,e,H),o.push(C.x,C.y,C.z),l=o.length/3-1,_[G]=l),s.push(m,l,v),s.push(l,f,v)):(g.push(f),g.push(v),g.push(m))}return new b.Geometry({attributes:{position:new b.GeometryAttribute({componentDatatype:O.ComponentDatatype.DOUBLE,componentsPerAttribute:3,values:o})},indices:g,primitiveType:b.PrimitiveType.TRIANGLES})},A.scaleToGeodeticHeight=function(e,t,r,n){r=I.defaultValue(r,R.Ellipsoid.WGS84);var s=p,i=L;if(t=I.defaultValue(t,0),n=I.defaultValue(n,!0),I.defined(e))for(var o=e.length,a=0;a<o;a+=3)R.Cartesian3.fromArray(e,a,i),n&&(i=r.scaleToGeodeticSurface(i,i)),0!==t&&(s=r.geodeticSurfaceNormal(i,s),R.Cartesian3.multiplyByScalar(s,t,s),R.Cartesian3.add(i,s,i)),e[a]=i.x,e[a+1]=i.y,e[a+2]=i.z;return e},e.PolygonPipeline=A,e.WindingOrder=h});
